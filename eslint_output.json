[{"filePath":"E:\\rtios-next\\my-app\\app\\about\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\analytics\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\requests\\ClientComponents.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\requests\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\BanUserButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":30,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":30,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Ban, CheckCircle } from 'lucide-react';\r\n\r\ninterface Props {\r\n    userId: string;\r\n    currentStatus: string; // 'active' | 'banned'\r\n}\r\n\r\nexport function BanUserButton({ userId, currentStatus }: Props) {\r\n    const [loading, setLoading] = useState(false);\r\n    const isBanned = currentStatus === 'banned';\r\n\r\n    async function toggleBan() {\r\n        const action = isBanned ? 'UNBAN' : 'BAN';\r\n        if (!confirm(`Are you sure you want to ${action} this user?`)) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('/api/admin/users/ban', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ userId, status: isBanned ? 'active' : 'banned' })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to update status');\r\n\r\n            window.location.reload();\r\n        } catch (error) {\r\n            alert('Error updating status');\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button\r\n            onClick={toggleBan}\r\n            disabled={loading}\r\n            className={`px-3 py-1.5 rounded text-xs font-interstate font-medium transition-colors flex items-center gap-1.5 ${isBanned\r\n                ? 'bg-green-500/20 text-green-400 border border-green-500/30 hover:bg-green-500/30'\r\n                : 'bg-red-500/20 text-red-400 border border-red-500/30 hover:bg-red-500/30'\r\n                }`}\r\n        >\r\n            {isBanned ? <CheckCircle className=\"w-3.5 h-3.5\" /> : <Ban className=\"w-3.5 h-3.5\" />}\r\n            {loading ? 'Updating...' : (isBanned ? 'Unban' : 'Ban')}\r\n        </button>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\DeleteUserButton.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":31,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":31,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { Trash2 } from 'lucide-react';\r\n\r\ninterface Props {\r\n    userId: string;\r\n}\r\n\r\nexport function DeleteUserButton({ userId }: Props) {\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    async function deleteUser() {\r\n        if (!confirm('EXTREMELY DANGEROUS ACTION:\\n\\nAre you sure you want to PERMANENTLY DELETE this user?\\nThis will remove their account and all data. This cannot be undone.')) return;\r\n\r\n        // Double confirmation\r\n        if (!confirm('Are you really sure? Click OK to delete.')) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            const res = await fetch('/api/admin/users/delete', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ userId })\r\n            });\r\n\r\n            if (!res.ok) throw new Error('Failed to delete user');\r\n\r\n            alert('User deleted successfully');\r\n            window.location.reload();\r\n        } catch (error) {\r\n            alert('Error deleting user');\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    return (\r\n        <button\r\n            onClick={deleteUser}\r\n            disabled={loading}\r\n            className=\"px-3 py-1.5 bg-red-900/20 hover:bg-red-900/40 text-red-500 border border-red-900/30 rounded text-xs font-interstate font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5\"\r\n            title=\"Permanently Delete User\"\r\n        >\r\n            <Trash2 className=\"w-3.5 h-3.5\" />\r\n            {loading ? 'Deleting...' : 'Delete'}\r\n        </button>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\ImpersonateButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\ResetUsageButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\UpgradeUserButton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\admin\\users\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Shield' is defined but never used.","line":4,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RotateCcw' is defined but never used.","line":4,"column":36,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":45},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Eye' is defined but never used.","line":4,"column":47,"nodeType":null,"messageId":"unusedVar","endLine":4,"endColumn":50}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient } from '@supabase/ssr';\r\nimport { cookies } from 'next/headers';\r\nimport { redirect } from 'next/navigation';\r\nimport { ArrowLeft, Users, Shield, RotateCcw, Eye } from 'lucide-react';\r\nimport Link from 'next/link';\r\n\r\n// Client Components\r\nimport { UpgradeUserButton } from '@/app/admin/users/UpgradeUserButton';\r\nimport { ResetUsageButton } from '@/app/admin/users/ResetUsageButton';\r\nimport { ImpersonateButton } from '@/app/admin/users/ImpersonateButton';\r\nimport { BanUserButton } from '@/app/admin/users/BanUserButton';\r\nimport { DeleteUserButton } from '@/app/admin/users/DeleteUserButton';\r\n\r\nasync function checkAdminAccess() {\r\n    const cookieStore = await cookies();\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll: () => cookieStore.getAll(),\r\n                setAll: (cookiesToSet) => {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch { /* Cookie setting may fail in SSR - safe to ignore */ }\r\n                },\r\n            },\r\n        }\r\n    );\r\n\r\n    const { data: { user } } = await supabase.auth.getUser();\r\n    if (!user) return false;\r\n\r\n    const { data: betaUser } = await supabase\r\n        .from('users')\r\n        .select('role')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n    return betaUser?.role === 'admin';\r\n}\r\n\r\nasync function getUsersWithUsage() {\r\n    const cookieStore = await cookies();\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_PUBLISHABLE_KEY || process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookies: {\r\n                getAll: () => cookieStore.getAll(),\r\n                setAll: (cookiesToSet) => {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        );\r\n                    } catch { /* Cookie setting may fail in SSR - safe to ignore */ }\r\n                },\r\n            },\r\n        }\r\n    );\r\n\r\n    // Get all users\r\n    const { data: appUsers } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (!appUsers) return [];\r\n\r\n    // Get job counts and EMAIL for each user\r\n    // Note: We need email from auth.users (via admin usage in API or just rely on what we have)\r\n    // IMPORTANT: public.users has 'email' column from our sync setup.\r\n    const usersWithData = await Promise.all(\r\n        appUsers.map(async (user) => {\r\n            // Get job count\r\n            const { count: jobCount } = await supabase\r\n                .from('jobs')\r\n                .select('*', { count: 'exact', head: true })\r\n                .eq('user_id', user.id);\r\n\r\n            return {\r\n                ...user,\r\n                user_id: user.id, // compatibility\r\n                jobs_created: jobCount || 0\r\n            };\r\n        })\r\n    );\r\n\r\n    return usersWithData;\r\n}\r\n\r\nexport default async function UserManagement() {\r\n    const isAdmin = await checkAdminAccess();\r\n\r\n    if (!isAdmin) {\r\n        redirect('/');\r\n    }\r\n\r\n    const users = await getUsersWithUsage();\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-app-dark p-8 font-interstate\">\r\n            <div className=\"max-w-7xl mx-auto space-y-8\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center gap-4\">\r\n                    <Link\r\n                        href=\"/admin\"\r\n                        className=\"p-2 hover:bg-white/5 rounded-full transition-colors\"\r\n                    >\r\n                        <ArrowLeft className=\"w-6 h-6 text-text-secondary\" />\r\n                    </Link>\r\n                    <div>\r\n                        <h1 className=\"text-3xl font-tiempos text-text-primary\">User Management</h1>\r\n                        <p className=\"text-text-secondary\">Total users: {users.length}</p>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Users Table */}\r\n                <div className=\"bg-surface-base border border-white/10 rounded-xl overflow-hidden\">\r\n                    <div className=\"overflow-x-auto\">\r\n                        <table className=\"w-full text-left\">\r\n                            <thead className=\"bg-white/5 border-b border-white/10\">\r\n                                <tr>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Email</th>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Role</th>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Jobs Created</th>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Status</th>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Joined</th>\r\n                                    <th className=\"p-4 text-xs font-bold text-text-secondary uppercase tracking-wider\">Actions</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody className=\"divide-y divide-white/10\">\r\n                                {users.map((user) => {\r\n                                    const isAtLimit = user.jobs_created >= 2;\r\n                                    const isUserAdmin = user.role === 'admin';\r\n\r\n                                    return (\r\n                                        <tr key={user.user_id} className=\"hover:bg-white/5 transition-colors\">\r\n                                            <td className=\"p-4\">\r\n                                                <div className=\"flex items-center gap-3\">\r\n                                                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-white/10 to-white/5 flex items-center justify-center border border-white/10\">\r\n                                                        <Users className=\"w-4 h-4 text-text-secondary\" />\r\n                                                    </div>\r\n                                                    <span className=\"font-medium text-text-primary\">{user.email}</span>\r\n                                                </div>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                <span className={`inline-flex items-center px-2 py-1 rounded text-xs font-medium border ${isUserAdmin\r\n                                                    ? 'bg-red-500/20 text-red-400 border-red-500/30'\r\n                                                    : 'bg-blue-500/20 text-blue-400 border-blue-500/30'\r\n                                                    }`}>\r\n                                                    {user.role}\r\n                                                </span>\r\n                                            </td>\r\n                                            <td className=\"p-4 text-text-primary\">\r\n                                                <span className={!isUserAdmin && isAtLimit ? 'text-red-400 font-bold' : ''}>\r\n                                                    {user.jobs_created}\r\n                                                </span>\r\n                                                <span className=\"text-text-secondary\">/2</span>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                {isUserAdmin ? (\r\n                                                    <span className=\"text-green-400 text-xs font-bold uppercase\">Unlimited</span>\r\n                                                ) : isAtLimit ? (\r\n                                                    <span className=\"text-red-400 text-xs font-bold uppercase\">Limit Reached</span>\r\n                                                ) : (\r\n                                                    <span className=\"text-yellow-400 text-xs font-bold uppercase\">Active</span>\r\n                                                )}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-text-secondary text-sm\">\r\n                                                {new Date(user.created_at).toLocaleDateString()}\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                <div className=\"flex gap-2 items-center\">\r\n                                                    <UpgradeUserButton userId={user.id} currentRole={user.role} />\r\n\r\n                                                    {/* Admin Tools for Non-Admin Users */}\r\n                                                    {!isUserAdmin && (\r\n                                                        <>\r\n                                                            <ResetUsageButton userId={user.id} />\r\n                                                            <ImpersonateButton userId={user.id} />\r\n                                                            <div className=\"w-px h-4 bg-white/10 mx-1\"></div>\r\n                                                            <BanUserButton userId={user.id} currentStatus={user.status || 'active'} />\r\n                                                            <DeleteUserButton userId={user.id} />\r\n                                                        </>\r\n                                                    )}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    );\r\n                                })}\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    {users.length === 0 && (\r\n                        <div className=\"p-12 text-center text-text-secondary\">\r\n                            <p>No users found</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\check-access\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\impersonate\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\reset-usage\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\upgrade-user\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\users\\ban\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\api\\admin\\users\\delete\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\cookie\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\dashboard\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\pricing\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\settings\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\app\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\scripts\\schema-doc.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\errors\\ErrorBoundary.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\errors\\FeatureErrorBoundary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'_info' is defined but never used.","line":18,"column":30,"nodeType":null,"messageId":"unusedVar","endLine":18,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\n\nimport React from 'react';\nimport { ErrorBoundary } from '@/src/components/errors/ErrorBoundary';\n\ninterface FeatureErrorBoundaryProps {\n    children: React.ReactNode;\n    featureName: string;\r\n}\r\n\r\nexport const FeatureErrorBoundary: React.FC<FeatureErrorBoundaryProps> = ({\r\n    children,\r\n    featureName\r\n}) => {\r\n    return (\r\n        <ErrorBoundary\r\n            resetKeys={[featureName]}\r\n            onError={(error, _info) => {\r\n                console.error(`[${featureName}] Error:`, error);\r\n                // Here you could also log to your centralized error service with feature context\r\n                // errorService.logError(error, { component: featureName });\r\n            }}\r\n            fallback={\r\n                <div className=\"flex flex-col items-center justify-center p-8 border border-red-200 rounded-lg bg-red-50 dark:bg-red-900/10 dark:border-red-800\">\r\n                    <div className=\"mb-3 text-red-500\">\r\n                        <svg\r\n                            xmlns=\"http://www.w3.org/2000/svg\"\r\n                            viewBox=\"0 0 24 24\"\r\n                            fill=\"none\"\r\n                            stroke=\"currentColor\"\r\n                            strokeWidth=\"2\"\r\n                            strokeLinecap=\"round\"\r\n                            strokeLinejoin=\"round\"\r\n                            className=\"w-8 h-8\"\r\n                        >\r\n                            <circle cx=\"12\" cy=\"12\" r=\"10\" />\r\n                            <line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"12\" />\r\n                            <line x1=\"12\" y1=\"16\" x2=\"12.01\" y2=\"16\" />\r\n                        </svg>\r\n                    </div>\r\n                    <h3 className=\"mb-2 text-lg font-medium text-red-800 dark:text-red-200\">\r\n                        {featureName} Unavailable\r\n                    </h3>\r\n                    <p className=\"mb-4 text-sm text-center text-red-600 dark:text-red-300\">\r\n                        We ran into an issue loading this section.\r\n                    </p>\r\n                    <button\r\n                        onClick={() => window.location.reload()} // Simple reload for now, or use a state reset mechanism if passed\r\n                        className=\"px-3 py-1.5 text-xs font-medium text-white transition-colors bg-red-600 rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500\"\r\n                    >\r\n                        Reload Page\r\n                    </button>\r\n                </div>\r\n            }\r\n        >\r\n            {children}\r\n        </ErrorBoundary>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\features\\analysis\\ResumeAnalysisDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\features\\cover-letter\\CoverLetterDisplay.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\features\\interview\\InterviewPrepDisplay.tsx","messages":[{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\nE:\\rtios-next\\my-app\\src\\components\\features\\interview\\InterviewPrepDisplay.tsx:22:20\n  20 |         const url = new URL(href || '', typeof window !== 'undefined' ? window.location.origin : '');\n  21 |         if (!['http:', 'https:'].includes(url.protocol)) {\n> 22 |             return <span>{children}</span>;\n     |                    ^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  23 |         }\n  24 |         return (\n  25 |             <a","line":22,"column":20,"nodeType":null,"endLine":22,"endColumn":43},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\nE:\\rtios-next\\my-app\\src\\components\\features\\interview\\InterviewPrepDisplay.tsx:25:13\n  23 |         }\n  24 |         return (\n> 25 |             <a\n     |             ^^\n> 26 |                 href={url.toString()}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 27 |                 target=\"_blank\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 28 |                 rel=\"noopener noreferrer nofollow\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 29 |                 className=\"text-accent hover:underline\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 30 |             >\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 31 |                 {children}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 32 |             </a>\n     | ^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  33 |         );\n  34 |     } catch {\n  35 |         return <span>{children}</span>;","line":25,"column":13,"nodeType":null,"endLine":32,"endColumn":17}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport { InterviewPrepState, JobInfo, InterviewQuestion } from '@/src/types';\r\nimport { Brain, Plus, ArrowRight, Layers, Target, FileCheck, MessageSquare, ChevronDown, ChevronUp } from 'lucide-react';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\ninterface InterviewPrepDisplayProps {\r\n    state: InterviewPrepState;\r\n    jobInfo: JobInfo;\r\n    onGenerateMore: () => void;\r\n    canGenerate: boolean;\r\n}\r\n\r\nconst ALLOWED_ELEMENTS = [\r\n    'p', 'br', 'strong', 'em', 'ul', 'ol', 'li',\r\n    'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'code', 'pre', 'a'\r\n];\r\n\r\nconst SafeLink: React.FC<{ href?: string; children?: React.ReactNode }> = ({ href, children }) => {\r\n    try {\r\n        const url = new URL(href || '', typeof window !== 'undefined' ? window.location.origin : '');\r\n        if (!['http:', 'https:'].includes(url.protocol)) {\r\n            return <span>{children}</span>;\r\n        }\r\n        return (\r\n            <a\r\n                href={url.toString()}\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer nofollow\"\r\n                className=\"text-accent hover:underline\"\r\n            >\r\n                {children}\r\n            </a>\r\n        );\r\n    } catch {\r\n        return <span>{children}</span>;\r\n    }\r\n};\r\n\r\nconst InterviewQuestionCard: React.FC<{ question: InterviewQuestion; index: number }> = ({ question, index }) => {\r\n    const [isExpanded, setIsExpanded] = React.useState(true);\r\n\r\n    return (\r\n        <div\r\n            className=\"bg-surface-elevated border border-white/5 rounded-lg mb-8 opacity-0 animate-fade-in-up relative overflow-hidden group transition-all hover:border-white/10\"\r\n            style={{ animationDelay: `${index * 150}ms`, animationFillMode: 'forwards' }}\r\n        >\r\n            {/* Card Header */}\r\n            <div className=\"p-6 border-b border-white/5 bg-surface-base cursor-pointer hover:bg-white/5 transition-colors\" onClick={() => setIsExpanded(!isExpanded)}>\r\n                <div className=\"flex items-start justify-between gap-4\">\r\n                    <div className=\"flex-1\">\r\n                        <span className={`inline-block px-2 py-0.5 rounded text-[9px] font-interstate uppercase tracking-widest border mb-3\r\n                        ${question.type === 'Behavioral' ? 'border-purple-500/30 text-purple-300 bg-purple-500/5' :\r\n                                question.type === 'Technical' ? 'border-blue-500/30 text-blue-300 bg-blue-500/5' :\r\n                                    'border-amber-500/30 text-amber-300 bg-amber-500/5'\r\n                            }`}>\r\n                            {question.type}\r\n                        </span>\r\n                        <h3 className=\"font-tiempos text-xl md:text-2xl font-bold text-text-primary leading-tight\">\r\n                            {question.question}\r\n                        </h3>\r\n                    </div>\r\n                    <div className=\"text-text-secondary opacity-50\">\r\n                        {isExpanded ? <ChevronUp className=\"w-5 h-5\" /> : <ChevronDown className=\"w-5 h-5\" />}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {isExpanded && (\r\n                <div className=\"animate-fade-in\">\r\n                    {/* HERO SECTION: STRONG SAMPLE ANSWER */}\r\n                    <div className=\"p-6 bg-accent/5 border-b border-white/5 relative\">\r\n                        <div className=\"flex items-center gap-2 mb-3\">\r\n                            <span className=\"text-[10px] font-interstate font-bold uppercase tracking-widest flex items-center gap-1.5 text-accent\">\r\n                                <FileCheck className=\"w-3 h-3\" />\r\n                                Strong Sample Answer\r\n                            </span>\r\n                        </div>\r\n                        <div className=\"font-tiempos text-base text-text-primary leading-relaxed relative z-10\">\r\n                            <p className=\"whitespace-pre-line text-opacity-90\">{question.sampleAnswer}</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Guidance Grid (Markdown) */}\r\n                    <div className=\"p-6 grid grid-cols-1 lg:grid-cols-2 gap-8 border-b border-white/5\">\r\n\r\n                        {/* Left Column: Evaluation Criteria */}\r\n                        <div>\r\n                            <h4 className=\"flex items-center gap-2 font-interstate text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-3\">\r\n                                <Target className=\"w-3 h-3\" /> What They Are Evaluating\r\n                            </h4>\r\n                            <div className=\"prose prose-invert prose-sm prose-ul:list-disc prose-li:font-sans prose-li:text-text-primary prose-li:text-xs prose-li:leading-relaxed\">\r\n                                <ReactMarkdown\r\n                                    allowedElements={ALLOWED_ELEMENTS}\r\n                                    unwrapDisallowed\r\n                                    components={{ a: SafeLink }}\r\n                                >\r\n                                    {Array.isArray(question.evaluationCriteria) ? question.evaluationCriteria.join('\\n') : question.evaluationCriteria}\r\n                                </ReactMarkdown>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Right Column: Structure */}\r\n                        <div>\r\n                            <h4 className=\"flex items-center gap-2 font-interstate text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-3\">\r\n                                <Layers className=\"w-3 h-3\" /> Recommended Structure\r\n                            </h4>\r\n                            <div className=\"prose prose-invert prose-sm prose-ul:list-disc prose-li:font-sans prose-li:text-text-primary prose-li:text-xs prose-li:leading-relaxed\">\r\n                                <ReactMarkdown\r\n                                    allowedElements={ALLOWED_ELEMENTS}\r\n                                    unwrapDisallowed\r\n                                    components={{ a: SafeLink }}\r\n                                >\r\n                                    {Array.isArray(question.answerStructure) ? question.answerStructure.join('\\n') : question.answerStructure}\r\n                                </ReactMarkdown>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Follow-up Questions */}\r\n                    <div className=\"p-4 bg-surface-base\">\r\n                        <h4 className=\"flex items-center gap-2 font-interstate text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-2 opacity-70\">\r\n                            <MessageSquare className=\"w-3 h-3\" /> Likely Follow-ups\r\n                        </h4>\r\n                        <ul className=\"space-y-1\">\r\n                            {question.followUpQuestions && question.followUpQuestions.map((fq, i) => (\r\n                                <li key={i} className=\"text-xs text-text-secondary font-interstate flex items-start gap-2\">\r\n                                    <span className=\"text-white/20 select-none\">ΓÇó</span>\r\n                                    {fq}\r\n                                </li>\r\n                            ))}\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst InterviewPrepDisplay: React.FC<InterviewPrepDisplayProps> = ({\r\n    state,\r\n    jobInfo,\r\n    onGenerateMore,\r\n    canGenerate\r\n}) => {\r\n    const { questions, isGenerating } = state;\r\n\r\n    return (\r\n        <div className=\"h-full bg-surface-base flex flex-col overflow-hidden relative font-sans\">\r\n\r\n            {/* Header - Editorial Style */}\r\n            <div className=\"bg-surface-base p-6 md:p-8 border-b border-white/10 shrink-0 z-10 flex flex-col md:flex-row md:items-end justify-between gap-4\">\r\n                <div>\r\n                    <div className=\"flex items-center gap-3 mb-2\">\r\n                        <div className=\"bg-accent/10 p-1.5 rounded\">\r\n                            <Brain className=\"w-5 h-5 text-accent\" />\r\n                        </div>\r\n                        <span className=\"font-interstate text-xs font-bold text-accent uppercase tracking-[0.2em]\">\r\n                            Mission Preparation\r\n                        </span>\r\n                    </div>\r\n                    <h2 className=\"font-tiempos text-3xl md:text-4xl font-bold text-text-primary\">\r\n                        The War Room\r\n                    </h2>\r\n                    <p className=\"text-text-secondary mt-3 font-normal max-w-xl text-sm\">\r\n                        High-intensity preparation for <span className=\"text-white font-medium border-b border-white/20 pb-0.5\">{jobInfo.title || 'your target role'}</span>.\r\n                        <br />\r\n                        <span className=\"text-text-secondary text-sm font-medium mt-2 block\">Simulate scenarios. Refine your strategy. Win the offer.</span>\r\n                    </p>\r\n                </div>\r\n\r\n                {/* Top Action (Contextual) */}\r\n                {questions.length > 0 && (\r\n                    <div className=\"hidden md:block\">\r\n                        <span className=\"font-interstate text-xs text-text-secondary\">\r\n                            {questions.length} Scenarios Generated\r\n                        </span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Scrollable Content Area */}\r\n            <div className=\"flex-1 overflow-y-auto p-6 md:p-8 custom-scrollbar\">\r\n\r\n                {questions.length === 0 && !isGenerating ? (\r\n                    <div className=\"flex flex-col items-center justify-center h-full text-center space-y-6\">\r\n                        <div className=\"w-20 h-20 bg-surface-elevated rounded-full flex items-center justify-center border border-white/5 shadow-2xl\">\r\n                            <Brain className=\"w-8 h-8 text-text-secondary opacity-50\" />\r\n                        </div>\r\n                        <div>\r\n                            <h3 className=\"font-tiempos text-2xl text-text-primary mb-2\">Initialize War Room</h3>\r\n                            <p className=\"font-interstate text-sm text-text-secondary max-w-sm mx-auto leading-relaxed\">\r\n                                Generate a high-signal simulation tailored to uncover gaps and highlight strengths.\r\n                            </p>\r\n                        </div>\r\n                        <button\r\n                            onClick={onGenerateMore}\r\n                            disabled={!canGenerate}\r\n                            className=\"group relative px-8 py-3 bg-accent text-surface-base font-interstate font-bold text-sm tracking-wide hover:bg-white transition-all disabled:opacity-50 disabled:cursor-not-allowed overflow-hidden\"\r\n                        >\r\n                            <span className=\"relative z-10 flex items-center gap-2\">\r\n                                DEPLOY WAR ROOM <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\r\n                            </span>\r\n                        </button>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"max-w-4xl mx-auto pb-10\">\r\n                        {questions.map((q, index) => (\r\n                            <InterviewQuestionCard key={q.id || index} question={q} index={index} />\r\n                        ))}\r\n\r\n                        {/* Loading State or \"Generate More\" */}\r\n                        <div className=\"mt-12 flex justify-center pb-8\">\r\n                            {isGenerating ? (\r\n                                <div className=\"flex items-center gap-3 font-interstate text-xs text-accent uppercase tracking-widest animate-pulse\">\r\n                                    <div className=\"w-2 h-2 bg-accent rounded-full animate-bounce\" style={{ animationDelay: '0ms' }}></div>\r\n                                    <div className=\"w-2 h-2 bg-accent rounded-full animate-bounce\" style={{ animationDelay: '150ms' }}></div>\r\n                                    <div className=\"w-2 h-2 bg-accent rounded-full animate-bounce\" style={{ animationDelay: '300ms' }}></div>\r\n                                    Processing Intelligence...\r\n                                </div>\r\n                            ) : (\r\n                                <button\r\n                                    onClick={onGenerateMore}\r\n                                    className=\"group flex items-center gap-3 px-6 py-3 border border-white/20 text-text-secondary hover:text-accent hover:border-accent transition-all duration-300 font-interstate text-xs font-bold uppercase tracking-widest\"\r\n                                >\r\n                                    <Plus className=\"w-4 h-4 group-hover:rotate-90 transition-transform\" />\r\n                                    Add 5 Additional Questions\r\n                                </button>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\n// Memoize to prevent unnecessary re-renders\r\nexport default React.memo(InterviewPrepDisplay, (prevProps, nextProps) => {\r\n    return (\r\n        prevProps.state.questions.length === nextProps.state.questions.length &&\r\n        prevProps.state.isGenerating === nextProps.state.isGenerating &&\r\n        prevProps.canGenerate === nextProps.canGenerate\r\n    );\r\n});\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\features\\linkedin\\LinkedInMessageGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\features\\research\\CompanyResearchDisplay.tsx","messages":[{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\nE:\\rtios-next\\my-app\\src\\components\\features\\research\\CompanyResearchDisplay.tsx:18:14\n  16 |     const url = new URL(href || '', window.location.origin);\n  17 |     if (!['http:', 'https:'].includes(url.protocol)) {\n> 18 |       return <span>{children}</span>;\n     |              ^^^^^^^^^^^^^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  19 |     }\n  20 |     return (\n  21 |       <a","line":18,"column":14,"nodeType":null,"endLine":18,"endColumn":37},{"ruleId":"react-hooks/error-boundaries","severity":2,"message":"Error: Avoid constructing JSX within try/catch\n\nReact does not immediately render components when JSX is rendered, so any errors from this component will not be caught by the try/catch. To catch errors in rendering a given component, wrap that component in an error boundary. (https://react.dev/reference/react/Component#catching-rendering-errors-with-an-error-boundary).\n\nE:\\rtios-next\\my-app\\src\\components\\features\\research\\CompanyResearchDisplay.tsx:21:7\n  19 |     }\n  20 |     return (\n> 21 |       <a\n     |       ^^\n> 22 |         href={url.toString()}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 23 |         target=\"_blank\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 24 |         rel=\"noopener noreferrer nofollow\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 25 |         className=\"text-accent hover:underline\"\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 26 |       >\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 27 |         {children}\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 28 |       </a>\n     | ^^^^^^^^^^^ Avoid constructing JSX within try/catch\n  29 |     );\n  30 |   } catch {\n  31 |     return <span>{children}</span>;","line":21,"column":7,"nodeType":null,"endLine":28,"endColumn":11},{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":39,"column":71,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":102,"endColumn":3}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport React from 'react';\r\nimport { ResearchResult } from '@/src/types';\r\nimport { Building2, ExternalLink, Globe } from 'lucide-react';\r\nimport ReactMarkdown, { Components } from 'react-markdown';\r\n\r\n// Whitelist of allowed markdown elements for security\r\nconst ALLOWED_ELEMENTS = [\r\n  'p', 'br', 'strong', 'em', 'ul', 'ol', 'li',\r\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'code', 'pre', 'a'\r\n];\r\n\r\n// Safe link renderer - only allows http/https protocols\r\nconst SafeLink: Components['a'] = ({ href, children }) => {\r\n  try {\r\n    const url = new URL(href || '', window.location.origin);\r\n    if (!['http:', 'https:'].includes(url.protocol)) {\r\n      return <span>{children}</span>;\r\n    }\r\n    return (\r\n      <a\r\n        href={url.toString()}\r\n        target=\"_blank\"\r\n        rel=\"noopener noreferrer nofollow\"\r\n        className=\"text-accent hover:underline\"\r\n      >\r\n        {children}\r\n      </a>\r\n    );\r\n  } catch {\r\n    return <span>{children}</span>;\r\n  }\r\n};\r\n\r\ninterface CompanyResearchDisplayProps {\r\n  research: ResearchResult | null;\r\n}\r\n\r\nconst CompanyResearchDisplay: React.FC<CompanyResearchDisplayProps> = React.memo(({ research }) => {\r\n  if (!research) return (\r\n    <div className=\"p-8 text-center flex flex-col items-center justify-center h-full opacity-30\">\r\n      <Globe className=\"w-12 h-12 mb-4 text-text-secondary\" />\r\n      <p className=\"font-interstate text-sm text-text-secondary\">Awaiting Intelligence Report...</p>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div className=\"h-full bg-surface-elevated overflow-y-auto p-6 custom-scrollbar\">\r\n\r\n      {/* Header */}\r\n      <div className=\"flex items-center gap-3 mb-6 pb-4 border-b border-white/5\">\r\n        <div className=\"p-2 bg-white/5 rounded border border-white/10\">\r\n          <Building2 className=\"w-5 h-5 text-text-primary\" />\r\n        </div>\r\n        <div>\r\n          <h3 className=\"font-tiempos text-lg font-bold text-text-primary\">Reconnaissance Dossier</h3>\r\n          <p className=\"font-interstate text-[10px] text-text-secondary uppercase tracking-widest\">\r\n            Deep-Dive Target Intelligence\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content - Hardened ReactMarkdown */}\r\n      <div className=\"mb-8\">\r\n        <article className=\"prose prose-invert prose-p:font-sans prose-p:text-text-secondary prose-p:text-sm prose-p:leading-relaxed prose-headings:font-tiempos prose-headings:text-text-primary prose-strong:text-white prose-li:text-text-secondary prose-li:text-sm prose-a:text-accent prose-a:no-underline hover:prose-a:underline\">\r\n          <ReactMarkdown\r\n            allowedElements={ALLOWED_ELEMENTS}\r\n            unwrapDisallowed\r\n            components={{ a: SafeLink }}\r\n          >\r\n            {research.summary}\r\n          </ReactMarkdown>\r\n        </article>\r\n      </div>\r\n\r\n      {/* Sources */}\r\n      {research.sources.length > 0 && (\r\n        <div className=\"bg-surface-base rounded-lg p-4 border border-white/5\">\r\n          <h4 className=\"font-interstate text-[10px] font-bold text-text-secondary uppercase tracking-widest mb-3 flex items-center gap-2\">\r\n            <ExternalLink className=\"w-3 h-3\" />\r\n            Verified Sources\r\n          </h4>\r\n          <ul className=\"space-y-2\">\r\n            {research.sources.map((source, idx) => (\r\n              <li key={idx} className=\"overflow-hidden\">\r\n                <a\r\n                  href={source.uri}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                  className=\"flex items-center gap-3 text-xs text-text-secondary hover:text-accent transition-colors group font-interstate\"\r\n                >\r\n                  <span className=\"text-white/20\">[{idx + 1}]</span>\r\n                  <span className=\"truncate opacity-70 group-hover:opacity-100 border-b border-transparent group-hover:border-accent/50 pb-0.5\">{source.title || source.uri}</span>\r\n                </a>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default CompanyResearchDisplay;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\AppShell.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\ContextSwitcher.tsx","messages":[{"ruleId":"react/display-name","severity":2,"message":"Component definition is missing display name","line":20,"column":17,"nodeType":"CallExpression","messageId":"noDisplayName","endLine":39,"endColumn":3}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useRef, useEffect, useCallback } from 'react';\r\nimport { UserMenu } from '@/src/components/ui/UserMenu';\r\nimport { JobInfo, SavedResume } from '@/src/types';\r\nimport { ChevronDown, Check } from 'lucide-react';\r\n\r\ninterface ContextSwitcherProps {\r\n    jobs: JobInfo[];\r\n    activeJobId: string | null;\r\n    resumes: SavedResume[];\r\n    activeResumeId: string | null;\r\n    onSelectStrategy: (jobId: string) => void;\r\n}\r\n\r\ninterface JobItemProps {\r\n    job: JobInfo;\r\n    isActive: boolean;\r\n    onSelect: (jobId: string) => void;\r\n}\r\n\r\nconst JobItem = React.memo(({ job, isActive, onSelect }: JobItemProps) => (\r\n    <button\r\n        onClick={() => onSelect(job.id!)}\r\n        className=\"w-full text-left p-4 hover:bg-white/5 transition-colors border-b border-white/5 flex items-start justify-between group\"\r\n    >\r\n        <div>\r\n            <div className={`font-tiempos text-sm font-bold mb-1 ${isActive ? 'text-accent' : 'text-text-primary'}`}>\r\n                {job.contextName || job.title}\r\n            </div>\r\n            <div className=\"flex flex-col gap-0.5\">\r\n                <div className=\"font-interstate text-[10px] text-text-secondary\">\r\n                    {job.company} ΓÇó {job.title}\r\n                </div>\r\n            </div>\r\n        </div>\r\n        {isActive && (\r\n            <Check className=\"w-4 h-4 text-accent\" />\r\n        )}\r\n    </button>\r\n));\r\n\r\nconst ContextSwitcher: React.FC<ContextSwitcherProps> = ({\r\n    jobs,\r\n    activeJobId,\r\n    resumes,\r\n    onSelectStrategy,\r\n}) => {\r\n    const [isOpen, setIsOpen] = useState(false);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n\r\n    const activeJob = jobs.find(j => j.id === activeJobId);\r\n    const activeResume = resumes.length > 0 ? resumes[0] : null;\r\n\r\n    // Close dropdown when clicking outside\r\n    useEffect(() => {\r\n        const handleClickOutside = (event: MouseEvent) => {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsOpen(false);\r\n            }\r\n        };\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => document.removeEventListener('mousedown', handleClickOutside);\r\n    }, []);\r\n\r\n    const handleSelect = useCallback((jobId: string) => {\r\n        onSelectStrategy(jobId);\r\n        setIsOpen(false);\r\n    }, [onSelectStrategy]);\r\n\r\n    return (\r\n        <div className=\"w-full bg-surface-base border-b border-white/5 px-6 py-4 flex items-center justify-between z-30\" ref={dropdownRef}>\r\n            <div className=\"flex items-center gap-4\">\r\n                <span className=\"font-interstate text-xs text-text-secondary uppercase tracking-widest hidden md:inline-block\">\r\n                    Active Application:\r\n                </span>\r\n\r\n                <div className=\"relative\">\r\n                    <button\r\n                        onClick={() => setIsOpen(!isOpen)}\r\n                        className=\"flex items-center gap-3 group focus:outline-none\"\r\n                    >\r\n                        <div className=\"flex items-center gap-2\">\r\n                            <div className=\"w-2 h-2 rounded-full bg-accent shadow-[0_0_8px_rgba(0,255,127,0.4)]\"></div>\r\n                            <span className=\"font-tiempos text-lg font-bold text-text-primary group-hover:text-white transition-colors\">\r\n                                {activeJob ? (activeJob.contextName || activeJob.title) : 'Select Application'}\r\n                            </span>\r\n                            <span className=\"font-interstate text-xs text-text-secondary hidden md:inline-block\">\r\n                                {activeResume ? `(${activeResume.fileName})` : ''}\r\n                            </span>\r\n                        </div>\r\n                        <ChevronDown className={`w-4 h-4 text-text-secondary transition-transform duration-200 ${isOpen ? 'rotate-180' : ''}`} />\r\n                    </button>\r\n\r\n                    {/* Dropdown Menu */}\r\n                    {isOpen && (\r\n                        <div className=\"absolute top-full left-0 mt-3 w-[300px] md:w-[400px] bg-surface-elevated border border-white/10 rounded-lg shadow-2xl overflow-hidden animate-fade-in-up z-40\">\r\n                            <div className=\"max-h-[300px] overflow-y-auto custom-scrollbar\">\r\n                                {jobs.map((job) => (\r\n                                    <JobItem\r\n                                        key={job.id}\r\n                                        job={job}\r\n                                        isActive={activeJobId === job.id}\r\n                                        onSelect={handleSelect}\r\n                                    />\r\n                                ))}\r\n                                {jobs.length === 0 && (\r\n                                    <div className=\"p-4 text-center font-interstate text-xs\">\r\n                                        <p className=\"text-text-secondary mb-2\">No applications yet.</p>\r\n                                        <p className=\"text-accent\">Open Workspace ΓåÆ to add one</p>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right side status or actions can go here */}\r\n            <div className=\"flex items-center gap-2\">\r\n                {activeJob && (\r\n                    <span className=\"font-interstate text-[10px] text-text-secondary border border-white/10 rounded px-2 py-1\">\r\n                        {activeJob.company}\r\n                    </span>\r\n                )}\r\n                <div className=\"h-6 w-px bg-white/10 mx-2\" />\r\n                <UserMenu />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ContextSwitcher;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\Dashboard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\InputForm.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserProfile' is defined but never used.","line":2,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":2,"endColumn":30},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabaseBrowser' is defined but never used.","line":5,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":5,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":125,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":125,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { JobInfo, UserProfile, SavedResume, AppStatus } from '@/src/types';\r\nimport { Briefcase, FileText, RefreshCw, FolderOpen, AlertCircle, Plus, Check, Trash2 } from 'lucide-react';\r\nimport * as GeminiService from '@/src/domains/intelligence/actions';\r\nimport { supabaseBrowser } from '@/src/services/supabase';\r\n\r\ninterface InputFormProps {\r\n    // Resume Props\r\n    resumes: SavedResume[];\r\n    activeResumeId: string | null;\r\n    onAddResume: (file: File) => void;\r\n    onSelectResume: (id: string) => void;\r\n    onDeleteResume: (id: string) => void;\r\n\r\n\r\n\r\n    // Job Props\r\n    jobs: JobInfo[];\r\n    activeJobId: string | null;\r\n    onAddJob: (job: JobInfo) => Promise<void>;\r\n    onSelectJob: (id: string) => void;\r\n    onDeleteJob: (id: string) => void;\r\n\r\n    // App Props\r\n    onGenerate: () => void;\r\n    appStatus: AppStatus;\r\n}\r\n\r\n\r\ntype JobMode = 'library' | 'new';\r\ntype NewJobMode = 'url' | 'manual';\r\n\r\nconst InputForm: React.FC<InputFormProps> = ({\r\n    resumes,\r\n    activeResumeId,\r\n\r\n    jobs,\r\n    activeJobId,\r\n    onAddJob,\r\n    onSelectJob,\r\n    onDeleteJob,\r\n    onGenerate,\r\n    appStatus,\r\n}) => {\r\n\r\n    const [jobMode, setJobMode] = useState<JobMode>('library');\r\n    const [newJobMode, setNewJobMode] = useState<NewJobMode>('url');\r\n\r\n    // New Job State\r\n    const [newJobUrl, setNewJobUrl] = useState('');\r\n    const [isExtracting, setIsExtracting] = useState(false);\r\n    const [newJobData, setNewJobData] = useState<JobInfo>({\r\n        title: '',\r\n        company: '',\r\n        description: '',\r\n        companyUrl: '',\r\n        contextName: ''\r\n    });\r\n    const [urlError, setUrlError] = useState<string | null>(null);\r\n\r\n    const currentResume = resumes.length > 0 ? resumes[0] : null;\r\n\r\n\r\n\r\n    const [isSavingJob, setIsSavingJob] = useState(false);\r\n\r\n    // Link resume to job creation if a resume is active\r\n    const handleSaveJob = async () => {\r\n        if (newJobData.title && newJobData.company && newJobData.description && newJobData.contextName) {\r\n            setIsSavingJob(true);\r\n            try {\r\n                const jobToSave = {\r\n                    ...newJobData,\r\n                    linkedResumeId: activeResumeId || undefined // Automatically link active resume\r\n                };\r\n                await onAddJob(jobToSave);\r\n                setNewJobData({ title: '', company: '', description: '', companyUrl: '', contextName: '' });\r\n                setNewJobUrl('');\r\n                setJobMode('library');\r\n            } catch (error) {\r\n                console.error(\"Failed to save job\", error);\r\n            } finally {\r\n                setIsSavingJob(false);\r\n            }\r\n        }\r\n    };\r\n\r\n    // ... (rest of the file until button)\r\n\r\n    <button\r\n        onClick={handleSaveJob}\r\n        disabled={!newJobData.title || !newJobData.company || !newJobData.description || !newJobData.contextName || isSavingJob}\r\n        className=\"w-full py-3 bg-accent text-surface-base font-interstate font-bold text-xs uppercase tracking-widest rounded hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n    >\r\n        {isSavingJob ? 'Saving Application...' : 'Next: Save Context'}\r\n    </button>\r\n\r\n    const handleUrlExtraction = async () => {\r\n        if (!newJobUrl) return;\r\n\r\n        setIsExtracting(true);\r\n        setUrlError(null);\r\n\r\n        try {\r\n            const extracted = await GeminiService.extractJobFromUrl(newJobUrl);\r\n\r\n            setNewJobData(prev => ({\r\n                ...prev,\r\n                title: extracted.title || '',\r\n                company: extracted.company || '',\r\n                description: extracted.description || '',\r\n                companyUrl: extracted.companyUrl || '',\r\n                sourceUrl: newJobUrl,\r\n                // Suggest a context name\r\n                contextName: extracted.company && extracted.title ? `${extracted.title} - ${extracted.company}` : prev.contextName\r\n            }));\r\n\r\n            if (!extracted.description || extracted.description.length < 50) {\r\n                setUrlError(\"Could not fully extract details. Please review and fill manually.\");\r\n                setNewJobMode('manual');\r\n            } else {\r\n                setNewJobMode('manual');\r\n            }\r\n\r\n        } catch (e) {\r\n            setUrlError(\"Could not access link. Please paste details manually.\");\r\n            setNewJobMode('manual');\r\n        } finally {\r\n            setIsExtracting(false);\r\n        }\r\n    };\r\n\r\n    const isGenerating = appStatus === AppStatus.GENERATING || appStatus === AppStatus.RESEARCHING || appStatus === AppStatus.ANALYZING || appStatus === AppStatus.PARSING_RESUME;\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full bg-surface-elevated\">\r\n\r\n\r\n\r\n            {/* === APPLICATIONS (JOBS) === */}\r\n            <div className=\"space-y-6 animate-fade-in-up p-6\">\r\n                {jobMode === 'library' ? (\r\n                    <>\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div>\r\n                                <h3 className=\"font-tiempos text-lg font-bold text-text-primary mb-1\">Mission Objectives</h3>\r\n                                <p className=\"font-interstate text-xs text-text-secondary\">Select a target objective to work on.</p>\r\n                            </div>\r\n                            <button\r\n                                onClick={() => setJobMode('new')}\r\n                                className=\"p-2 bg-white/5 hover:bg-white/10 rounded-full text-accent transition-colors border border-white/10\"\r\n                            >\r\n                                <Plus className=\"w-4 h-4\" />\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"space-y-3\">\r\n                            {jobs.map((job) => (\r\n                                <div\r\n                                    key={job.id}\r\n                                    onClick={() => onSelectJob(job.id!)}\r\n                                    className={`p-4 rounded-lg border transition-all cursor-pointer relative group\r\n                                        ${activeJobId === job.id\r\n                                            ? 'bg-accent/10 border-accent shadow-[0_0_10px_rgba(0,255,127,0.1)]'\r\n                                            : 'bg-surface-base border-white/5 hover:border-white/20'}`}\r\n                                >\r\n                                    <div className=\"flex flex-col gap-1\">\r\n                                        <h4 className={`font-tiempos text-base font-bold ${activeJobId === job.id ? 'text-text-primary' : 'text-text-secondary group-hover:text-text-primary'}`}>\r\n                                            {job.contextName || job.title}\r\n                                        </h4>\r\n                                        <div className=\"flex items-center gap-2 font-interstate text-xs text-text-secondary\">\r\n                                            <Briefcase className=\"w-3 h-3\" />\r\n                                            {job.company}\r\n                                        </div>\r\n                                    </div>\r\n                                    {activeJobId === job.id && (\r\n                                        <div className=\"absolute top-4 right-4 text-accent text-xs font-bold uppercase tracking-widest flex items-center gap-1\">\r\n                                            Active <Check className=\"w-3 h-3\" />\r\n                                        </div>\r\n                                    )}\r\n                                    <button\r\n                                        onClick={(e) => { e.stopPropagation(); onDeleteJob(job.id!); }}\r\n                                        className=\"absolute bottom-4 right-4 p-1.5 text-text-secondary opacity-0 group-hover:opacity-100 hover:text-alert-gap transition-all\"\r\n                                    >\r\n                                        <Trash2 className=\"w-3 h-3\" />\r\n                                    </button>\r\n                                </div>\r\n                            ))}\r\n                            {jobs.length === 0 && (\r\n                                <div className=\"text-center p-8 border border-white/5 rounded bg-surface-base/50 flex flex-col items-center gap-3\">\r\n                                    <Briefcase className=\"w-8 h-8 text-text-secondary opacity-30\" />\r\n                                    <p className=\"text-xs text-text-secondary\">No active missions.</p>\r\n                                    <button onClick={() => setJobMode('new')} className=\"text-xs text-accent hover:underline\">Create Mission</button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </>\r\n                ) : (\r\n                    <div className=\"animate-fade-in-up\">\r\n                        {/* New Job Form */}\r\n                        <div className=\"flex items-center gap-2 mb-6\">\r\n                            <button onClick={() => setJobMode('library')} className=\"text-xs text-text-secondary hover:text-white\">Cancel</button>\r\n                            <div className=\"h-4 w-px bg-white/10\"></div>\r\n                            <h3 className=\"font-tiempos text-lg font-bold text-text-primary\">Step 2: Define Mission</h3>\r\n                        </div>\r\n\r\n                        {/* Mode Toggle */}\r\n                        <div className=\"flex bg-surface-base p-1 rounded border border-white/10 mb-6\">\r\n                            <button\r\n                                onClick={() => setNewJobMode('url')}\r\n                                className={`flex-1 py-1.5 text-xs font-interstate font-bold uppercase tracking-widest rounded transition-all\r\n                                    ${newJobMode === 'url' ? 'bg-white/10 text-white' : 'text-text-secondary hover:text-white'}`}\r\n                            >\r\n                                Auto-Extract Link\r\n                            </button>\r\n                            <button\r\n                                onClick={() => setNewJobMode('manual')}\r\n                                className={`flex-1 py-1.5 text-xs font-interstate font-bold uppercase tracking-widest rounded transition-all\r\n                                    ${newJobMode === 'manual' ? 'bg-white/10 text-white' : 'text-text-secondary hover:text-white'}`}\r\n                            >\r\n                                Manual Entry\r\n                            </button>\r\n                        </div>\r\n\r\n                        {newJobMode === 'url' ? (\r\n                            <div className=\"space-y-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-text-secondary mb-1\">Target Description URL</label>\r\n                                    <div className=\"flex gap-2\">\r\n                                        <input\r\n                                            type=\"url\"\r\n                                            value={newJobUrl}\r\n                                            onChange={(e) => setNewJobUrl(e.target.value)}\r\n                                            placeholder=\"https://linkedin.com/jobs/...\"\r\n                                            className=\"flex-1 bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none\"\r\n                                        />\r\n                                        <button\r\n                                            onClick={handleUrlExtraction}\r\n                                            disabled={!newJobUrl || isExtracting}\r\n                                            className={`px-4 border border-white/10 rounded text-text-primary disabled:opacity-50 transition-all flex items-center justify-center min-w-[3rem]\r\n                                                ${isExtracting ? 'bg-accent/10 border-accent/30' : 'bg-white/5 hover:bg-white/10'}`}\r\n                                        >\r\n                                            {isExtracting ? (\r\n                                                <RefreshCw className=\"w-4 h-4 animate-spin text-accent\" />\r\n                                            ) : (\r\n                                                <RefreshCw className=\"w-4 h-4\" />\r\n                                            )}\r\n                                        </button>\r\n                                    </div>\r\n\r\n                                    {/* Loading Indicator */}\r\n                                    {isExtracting && (\r\n                                        <div className=\"mt-3 p-3 bg-surface-base/50 border border-accent/20 rounded flex items-center gap-3 animate-fade-in-up\">\r\n                                            <div className=\"relative\">\r\n                                                <div className=\"w-3 h-3 bg-accent/50 rounded-full animate-ping absolute inset-0\"></div>\r\n                                                <div className=\"w-3 h-3 bg-accent rounded-full relative shadow-[0_0_10px_rgba(0,255,127,0.5)]\"></div>\r\n                                            </div>\r\n                                            <div className=\"flex flex-col\">\r\n                                                <span className=\"text-xs font-interstate font-bold text-accent uppercase tracking-widest\">\r\n                                                    Intelligence Active\r\n                                                </span>\r\n                                                <span className=\"text-xs text-text-secondary\">\r\n                                                    Analyzing target parameters...\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    )}\r\n\r\n                                    {urlError && (\r\n                                        <div className=\"mt-2 flex items-center gap-2 text-xs text-alert-gap bg-alert-gap/10 p-2 rounded\">\r\n                                            <AlertCircle className=\"w-3 h-3\" />\r\n                                            {urlError}\r\n                                        </div>\r\n                                    )}\r\n                                    <div className=\"mt-4 p-4 bg-surface-base border border-white/5 rounded\">\r\n                                        <p className=\"text-xs text-text-secondary leading-relaxed\">\r\n                                            <FileText className=\"w-3 h-3 inline mr-1\" />\r\n                                            AI will attempt to read the role, company, and parameters directly from the page.\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"space-y-4\">\r\n                                {/* Context Name Input (Required per PRD) */}\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-text-secondary mb-1 font-interstate\">Mission Name *</label>\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        value={newJobData.contextName || ''}\r\n                                        onChange={(e) => setNewJobData({ ...newJobData, contextName: e.target.value })}\r\n                                        placeholder=\"e.g. Senior PM - Google\"\r\n                                        className=\"w-full bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none placeholder:text-white/20\"\r\n                                    />\r\n                                    <p className=\"text-xs text-text-secondary mt-1\">This creates the file name for your saved mission.</p>\r\n                                </div>\r\n\r\n                                <div className=\"grid grid-cols-2 gap-4\">\r\n                                    <div>\r\n                                        <label className=\"block text-xs font-medium text-text-secondary mb-1\">Target Role *</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newJobData.title}\r\n                                            onChange={(e) => setNewJobData({ ...newJobData, title: e.target.value })}\r\n                                            className=\"w-full bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none\"\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"block text-xs font-medium text-text-secondary mb-1\">Target Entity *</label>\r\n                                        <input\r\n                                            type=\"text\"\r\n                                            value={newJobData.company}\r\n                                            onChange={(e) => setNewJobData({ ...newJobData, company: e.target.value })}\r\n                                            className=\"w-full bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none\"\r\n                                        />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div>\r\n                                    <label className=\"block text-xs font-medium text-text-secondary mb-1\">Target URL</label>\r\n                                    <input\r\n                                        type=\"url\"\r\n                                        value={newJobData.companyUrl}\r\n                                        onChange={(e) => setNewJobData({ ...newJobData, companyUrl: e.target.value })}\r\n                                        className=\"w-full bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none\"\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <div className=\"flex items-center justify-between mb-1\">\r\n                                        <label className=\"block text-xs font-medium text-text-secondary\">Mission Parameters *</label>\r\n                                        <button\r\n                                            onClick={() => {/* Mock load saved JD functionality */ alert(\"Load Saved JD clicked - Implementation would open a modal to select from past JDs\") }}\r\n                                            className=\"text-xs text-accent hover:underline flex items-center gap-1\"\r\n                                        >\r\n                                            <FolderOpen className=\"w-3 h-3\" /> Load Saved Parameters\r\n                                        </button>\r\n                                    </div>\r\n                                    <textarea\r\n                                        value={newJobData.description}\r\n                                        onChange={(e) => setNewJobData({ ...newJobData, description: e.target.value })}\r\n                                        className=\"w-full bg-surface-base border border-white/10 rounded px-3 py-2 text-sm text-text-primary focus:border-accent outline-none min-h-[150px] resize-none custom-scrollbar\"\r\n                                    />\r\n                                </div>\r\n\r\n                                <button\r\n                                    onClick={handleSaveJob}\r\n                                    disabled={!newJobData.title || !newJobData.company || !newJobData.description || !newJobData.contextName || isSavingJob}\r\n                                    className=\"w-full py-3 bg-accent text-surface-base font-interstate font-bold text-xs uppercase tracking-widest rounded hover:bg-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                                >\r\n                                    {isSavingJob ? 'Initializing Mission...' : 'Confirm Mission'}\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Main Action Bar (Sticky Bottom) */}\r\n            <div className=\"p-6 bg-surface-elevated border-t border-white/5\">\r\n                <button\r\n                    onClick={onGenerate}\r\n                    disabled={!currentResume || !activeJobId || isGenerating}\r\n                    className={`w-full py-4 px-4 rounded-sm font-interstate font-bold text-sm tracking-wide uppercase transition-all flex items-center justify-center gap-2\r\n            ${(!currentResume || !activeJobId || isGenerating)\r\n                            ? 'bg-surface-base border border-white/10 text-text-secondary cursor-not-allowed'\r\n                            : 'bg-accent text-surface-base hover:bg-white shadow-[0_0_15px_rgba(0,255,127,0.3)]'\r\n                        }`}\r\n                >\r\n                    {isGenerating ? 'Initializing Recon...' : 'EXECUTE ANALYSIS'}\r\n                </button>\r\n                {(!currentResume || !activeJobId) && !isGenerating && (\r\n                    <p className=\"text-center mt-2 text-xs text-alert-gap font-interstate uppercase tracking-widest\">\r\n                        {!currentResume ? 'Operative Profile Required' : 'Select Mission Objective'}\r\n                    </p>\r\n                )}\r\n            </div>\r\n\r\n        </div >\r\n    );\r\n};\r\n\r\nexport default InputForm;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\NavigationSidebar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\RightSidebar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'UserProfile' is defined but never used.","line":7,"column":28,"nodeType":null,"messageId":"unusedVar","endLine":7,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { lazy, Suspense } from 'react';\r\nimport { useAppStore } from '@/src/stores/appStore';\r\nimport InputForm from '@/src/components/layout/InputForm';\r\nimport CompanyResearchDisplay from '@/src/components/features/research/CompanyResearchDisplay';\r\nimport { useShallow } from 'zustand/react/shallow';\r\nimport { useWorkspaceStore } from '@/src/stores/workspaceStore';\r\nimport type { SavedResume, UserProfile, JobInfo, AppStatus } from '@/src/types';\r\nimport LoadingFallback from '@/src/components/shared/LoadingFallback';\r\nimport { X } from 'lucide-react';\r\nimport UsageCounter from '@/src/components/layout/UsageCounter';\r\n\r\n// Lazy load heavy chart component\r\nconst ResumeAnalysisDisplay = lazy(() => import('@/src/components/features/analysis/ResumeAnalysisDisplay'));\r\n\r\ninterface RightSidebarProps {\r\n    // Resume/Profile data\r\n    resumes: SavedResume[];\r\n    activeResumeId: string | null;\r\n    onAddResume: (file: File) => Promise<void>;\r\n    onSelectResume: (id: string) => void;\r\n    onDeleteResume: (id: string) => void;\r\n\r\n    // Job data\r\n    jobs: JobInfo[];\r\n    activeJobId: string | null;\r\n    onAddJob: (job: JobInfo) => Promise<void>;\r\n    onSelectJob: (id: string) => void;\r\n    onDeleteJob: (id: string) => void;\r\n\r\n    // Actions\r\n    onGenerate: () => Promise<void>;\r\n    appStatus: AppStatus;\r\n\r\n    // Mobile drawer control\r\n    isMobileOpen?: boolean;\r\n    onMobileClose?: () => void;\r\n}\r\n\r\nexport const RightSidebar: React.FC<RightSidebarProps> = ({\r\n    resumes,\r\n    activeResumeId,\r\n    onAddResume,\r\n    onSelectResume,\r\n    onDeleteResume,\r\n    jobs,\r\n    activeJobId,\r\n    onAddJob,\r\n    onSelectJob,\r\n    onDeleteJob,\r\n    onGenerate,\r\n    appStatus,\r\n    isMobileOpen = false,\r\n    onMobileClose\r\n}) => {\r\n    // Get tab state from appStore\r\n    const activeSidebarTab = useAppStore((s) => s.activeSidebarTab);\r\n    const setActiveSidebarTab = useAppStore((s) => s.setActiveSidebarTab);\r\n\r\n    // Get workspace data for display components (use useShallow)\r\n    const { research, analysis } = useWorkspaceStore(\r\n        useShallow((s) => ({\r\n            research: s.research,\r\n            analysis: s.analysis\r\n        }))\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {/* Mobile overlay backdrop */}\r\n            <div\r\n                className={`lg:hidden fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 ${isMobileOpen ? 'opacity-100' : 'opacity-0 pointer-events-none'\r\n                    }`}\r\n                onClick={onMobileClose}\r\n                aria-hidden=\"true\"\r\n            />\r\n\r\n            <aside className={`\r\n                fixed lg:relative\r\n                right-0 top-0 h-full\r\n                w-[85vw] max-w-[400px] lg:w-[400px] xl:w-[35%] lg:max-w-[600px]\r\n                bg-surface-elevated border-l border-white/5\r\n                flex flex-col shrink-0\r\n                transition-transform duration-300 ease-out z-40\r\n                ${isMobileOpen ? 'translate-x-0' : 'translate-x-full lg:translate-x-0'}\r\n            `}>\r\n                {/* Mobile close button */}\r\n                <button\r\n                    onClick={onMobileClose}\r\n                    className=\"lg:hidden absolute top-4 right-4 z-50 p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors\"\r\n                    aria-label=\"Close sidebar\"\r\n                >\r\n                    <X className=\"w-5 h-5 text-text-secondary\" />\r\n                </button>\r\n\r\n\r\n                <div className=\"flex items-center border-b border-white/5\">\r\n                    <button\r\n                        onClick={() => setActiveSidebarTab('input')}\r\n                        className={`flex-1 py-4 text-xs font-interstate font-bold uppercase tracking-widest transition-colors text-center flex justify-center\r\n            ${activeSidebarTab === 'input'\r\n                                ? 'text-text-primary border-b border-accent bg-white/5'\r\n                                : 'text-text-secondary hover:text-text-primary hover:bg-white/5'}`}\r\n                    >\r\n                        Mission Control\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveSidebarTab('analysis')}\r\n                        className={`flex-1 py-4 text-xs font-interstate font-bold uppercase tracking-widest transition-colors text-center flex justify-center\r\n            ${activeSidebarTab === 'analysis'\r\n                                ? 'text-text-primary border-b border-accent bg-white/5'\r\n                                : 'text-text-secondary hover:text-text-primary hover:bg-white/5'}`}\r\n                    >\r\n                        Fit Diagnostic\r\n                    </button>\r\n                    <button\r\n                        onClick={() => setActiveSidebarTab('research')}\r\n                        className={`flex-1 py-4 text-xs font-interstate font-bold uppercase tracking-widest transition-colors text-center flex justify-center\r\n            ${activeSidebarTab === 'research'\r\n                                ? 'text-text-primary border-b border-accent bg-white/5'\r\n                                : 'text-text-secondary hover:text-text-primary hover:bg-white/5'}`}\r\n                    >\r\n                        Recon Dossier\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Usage Counter - Shows free tier usage */}\r\n                <UsageCounter />\r\n\r\n                {/* Sidebar Content */}\r\n                <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\r\n                    <div className={`h-full ${activeSidebarTab === 'input' ? 'block' : 'hidden'}`}>\r\n                        <InputForm\r\n                            resumes={resumes}\r\n                            activeResumeId={activeResumeId}\r\n                            onAddResume={onAddResume}\r\n                            onSelectResume={onSelectResume}\r\n                            onDeleteResume={onDeleteResume}\r\n                            jobs={jobs}\r\n                            activeJobId={activeJobId}\r\n                            onAddJob={onAddJob}\r\n                            onSelectJob={onSelectJob}\r\n                            onDeleteJob={onDeleteJob}\r\n                            onGenerate={onGenerate}\r\n                            appStatus={appStatus}\r\n                        />\r\n                    </div>\r\n                    <div className={`h-full ${activeSidebarTab === 'analysis' ? 'block' : 'hidden'}`}>\r\n                        <Suspense fallback={<LoadingFallback />}>\r\n                            <ResumeAnalysisDisplay analysis={analysis} />\r\n                        </Suspense>\r\n                    </div>\r\n                    <div className={`h-full ${activeSidebarTab === 'research' ? 'block' : 'hidden'}`}>\r\n                        <CompanyResearchDisplay research={research} />\r\n                    </div>\r\n                </div>\r\n\r\n            </aside>\r\n        </>\r\n    );\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\layout\\UsageCounter.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\modals\\UpgradeModal.tsx","messages":[{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":46,"column":70,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[1684,1700],"text":" You&apos;ve created "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[1684,1700],"text":" You&lsquo;ve created "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[1684,1700],"text":" You&#39;ve created "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[1684,1700],"text":" You&rsquo;ve created "},"desc":"Replace with `&rsquo;`."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { X, Lock, Zap } from 'lucide-react';\r\n\r\ninterface UpgradeModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    title: string;\r\n    message: string;\r\n    isLifetimeLimit?: boolean; // NEW: indicates no reset timer\r\n    totalUsed?: number;\r\n    totalAllowed?: number;\r\n}\r\n\r\nexport default function UpgradeModal({\r\n    isOpen,\r\n    onClose,\r\n    title,\r\n    message,\r\n    isLifetimeLimit = false,\r\n    totalUsed = 2,\r\n    totalAllowed = 2\r\n}: UpgradeModalProps) {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 bg-black/70 z-50 flex items-center justify-center p-4\">\r\n            <div className=\"bg-surface-elevated border border-white/10 rounded-lg max-w-md w-full p-6\">\r\n                {/* Header */}\r\n                <div className=\"flex items-center justify-between mb-4\">\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <Lock className=\"w-5 h-5 text-accent\" />\r\n                        <h2 className=\"text-xl font-tiempos\">{title}</h2>\r\n                    </div>\r\n                    <button onClick={onClose} className=\"text-text-secondary hover:text-text-primary transition-colors\">\r\n                        <X className=\"w-5 h-5\" />\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Message */}\r\n                <p className=\"text-text-secondary mb-6\">{message}</p>\r\n\r\n                {isLifetimeLimit && (\r\n                    <div className=\"bg-red-500/10 border border-red-500/20 rounded-lg p-4 mb-6\">\r\n                        <p className=\"text-sm text-red-400\">\r\n                            <strong>Free trial complete.</strong> You've created {totalUsed} out of {totalAllowed} free job applications. Upgrade to continue!\r\n                        </p>\r\n                    </div>\r\n                )}\r\n\r\n                {/* CTA Buttons */}\r\n                <div className=\"flex flex-col gap-3 mb-6\">\r\n                    <button\r\n                        onClick={() => window.location.href = '/pricing'}\r\n                        className=\"w-full bg-accent hover:bg-accent/90 text-surface-base py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center gap-2\"\r\n                    >\r\n                        <Zap className=\"w-4 h-4\" />\r\n                        Upgrade to Pro\r\n                    </button>\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"w-full bg-surface-base border border-white/10 hover:bg-white/5 text-text-primary py-3 px-4 rounded-lg transition-colors\"\r\n                    >\r\n                        Maybe Later\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Pro Features */}\r\n                <div className=\"pt-6 border-t border-white/10\">\r\n                    <p className=\"text-xs text-text-secondary mb-3 uppercase tracking-wider\">Pro Benefits:</p>\r\n                    <ul className=\"space-y-3\">\r\n                        <li className=\"flex items-start gap-3\">\r\n                            <span className=\"text-accent mt-0.5\">Γ£ô</span>\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-text-primary\">Unlimited Job Applications</p>\r\n                                <p className=\"text-xs text-text-secondary\">Track as many jobs as you want</p>\r\n                            </div>\r\n                        </li>\r\n                        <li className=\"flex items-start gap-3\">\r\n                            <span className=\"text-accent mt-0.5\">Γ£ô</span>\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-text-primary\">Unlimited AI Generations</p>\r\n                                <p className=\"text-xs text-text-secondary\">Cover letters, LinkedIn messages, interview prep</p>\r\n                            </div>\r\n                        </li>\r\n                        <li className=\"flex items-start gap-3\">\r\n                            <span className=\"text-accent mt-0.5\">Γ£ô</span>\r\n                            <div>\r\n                                <p className=\"text-sm font-medium text-text-primary\">Priority Support</p>\r\n                                <p className=\"text-xs text-text-secondary\">Get help when you need it</p>\r\n                            </div>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n\r\n                {/* Pricing Teaser */}\r\n                <div className=\"mt-6 text-center\">\r\n                    <p className=\"text-xs text-text-secondary\">\r\n                        Starting at <span className=\"text-accent font-bold\">$9/month</span>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\shared\\LoadingFallback.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\AuthModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1365,1368],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1365,1368],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/no-unescaped-entities","severity":2,"message":"`'` can be escaped with `&apos;`, `&lsquo;`, `&#39;`, `&rsquo;`.","line":76,"column":19,"nodeType":"JSXText","messageId":"unescapedEntityAlts","suggestions":[{"messageId":"replaceWithAlt","data":{"alt":"&apos;"},"fix":{"range":[2696,2747],"text":"\n                We&apos;ve sent a verification link to "},"desc":"Replace with `&apos;`."},{"messageId":"replaceWithAlt","data":{"alt":"&lsquo;"},"fix":{"range":[2696,2747],"text":"\n                We&lsquo;ve sent a verification link to "},"desc":"Replace with `&lsquo;`."},{"messageId":"replaceWithAlt","data":{"alt":"&#39;"},"fix":{"range":[2696,2747],"text":"\n                We&#39;ve sent a verification link to "},"desc":"Replace with `&#39;`."},{"messageId":"replaceWithAlt","data":{"alt":"&rsquo;"},"fix":{"range":[2696,2747],"text":"\n                We&rsquo;ve sent a verification link to "},"desc":"Replace with `&rsquo;`."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":31,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":34,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4236,4239],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4236,4239],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\nimport React, { useState } from 'react';\nimport { X, CheckCircle2, AlertTriangle, ArrowRight } from 'lucide-react';\nimport { auth } from '@/src/services/supabase';\n\ninterface AuthModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  onSuccess: () => void;\n  initialMode?: 'signin' | 'signup';\n}\n\nconst AuthModal: React.FC<AuthModalProps> = ({ isOpen, onClose, onSuccess, initialMode = 'signup' }) => {\n  const [mode, setMode] = useState<'signin' | 'signup'>(initialMode);\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [message, setMessage] = useState<string | null>(null);\n\n  if (!isOpen) return null;\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    setMessage(null);\n    setLoading(true);\n    try {\n      if (mode === 'signup') {\n        const { data, error: err } = await auth.signUp(email, password);\n        if (err) throw err;\n        if (data?.session) {\n          onSuccess();\n        } else {\n          setMessage('Check your email to confirm your account.');\n        }\n      } else {\n        const { error: err } = await auth.signInWithPassword(email, password);\n        if (err) throw err;\n        onSuccess();\n      }\n    } catch (e: any) {\n      setError(e?.message ?? 'Authentication failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n      {/* Backdrop */}\n      <div\n        className=\"absolute inset-0 bg-surface-base/80 backdrop-blur-md transition-opacity\"\n        onClick={onClose}\n      />\n\n      {/* Modal Container */}\n      <div className=\"relative w-full max-w-md bg-surface-elevated border border-text-secondary/20 shadow-2xl rounded-lg overflow-hidden animate-fade-in-up\">\n\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 text-text-secondary hover:text-text-primary transition-colors\"\n          aria-label=\"Close modal\"\n        >\n          <X className=\"w-5 h-5\" />\n        </button>\n\n        <div className=\"p-8 md:p-10\">\n          {message ? (\n            <div className=\"text-center py-8 animate-fade-in\">\n              <div className=\"w-16 h-16 bg-accent/10 rounded-full flex items-center justify-center mx-auto mb-6\">\n                <CheckCircle2 className=\"w-8 h-8 text-accent\" />\n              </div>\n              <h2 className=\"font-tiempos text-2xl font-bold text-text-primary mb-3\">Check Your Email</h2>\n              <p className=\"font-interstate text-sm text-text-secondary mb-8 leading-relaxed\">\n                We've sent a verification link to <span className=\"text-text-primary font-medium\">{email}</span>.\n                Please confirm your account to continue.\n              </p>\n              <button\n                onClick={onClose}\n                className=\"w-full py-3 bg-accent text-white font-interstate font-bold text-xs tracking-widest uppercase rounded transition-all mb-3\"\n              >\n                Close Window\n              </button>\n              <button\n                onClick={() => {\n                  setMessage(null);\n                  setMode('signin');\n                }}\n                className=\"w-full py-3 bg-transparent border border-white/10 hover:border-white/20 text-text-secondary hover:text-text-primary font-interstate font-bold text-xs tracking-widest uppercase rounded transition-all\"\n              >\n                Back to Sign In\n              </button>\n            </div>\n          ) : (\n            <>\n              {/* Header */}\n              <h2 className=\"font-tiempos text-2xl md:text-3xl font-bold text-text-primary text-center mb-8\">\n                {mode === 'signup' ? 'Welcome to Rtios AI' : 'Welcome Back'}\n              </h2>\n\n              {/* Google Button */}\n              <button\n                onClick={async () => {\n                  setError(null);\n                  setLoading(true);\n                  try {\n                    const { error: err } = await auth.signInWithOAuth('google');\n                    if (err) throw err;\n                  } catch (e: any) {\n                    setError(e?.message ?? 'OAuth failed');\n                  } finally {\n                    setLoading(false);\n                  }\n                }}\n                disabled={loading}\n                className=\"w-full flex items-center justify-center gap-3 py-3 px-4 bg-surface-elevated border border-white/20 hover:border-white/30 hover:bg-surface-elevated/80 text-text-primary rounded transition-all mb-2 group disabled:opacity-50\"\n              >\n                <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"\n                    className=\"text-[#4285F4] group-hover:text-[#3367D6]\"\n                  />\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"\n                    className=\"text-[#34A853] group-hover:text-[#2d9147]\"\n                  />\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"\n                    className=\"text-[#FBBC05] group-hover:text-[#d9a304]\"\n                  />\n                  <path\n                    fill=\"currentColor\"\n                    d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"\n                    className=\"text-[#EA4335] group-hover:text-[#c5382c]\"\n                  />\n                </svg>\n                <span className=\"font-interstate text-sm font-medium\">Continue with Google</span>\n              </button>\n              <p className=\"text-center font-interstate text-xs text-text-secondary mb-6\">\n                {mode === 'signup' ? \"You'll analyze your first resume in under 60 seconds.\" : \"Welcome back to your career command center.\"}\n              </p>\n\n              {/* Divider */}\n              <div className=\"flex items-center gap-4 mb-6\">\n                <div className=\"h-px bg-white/10 flex-1\"></div>\n                <span className=\"font-interstate text-xs text-text-secondary\">OR</span>\n                <div className=\"h-px bg-white/10 flex-1\"></div>\n              </div>\n\n              {/* Form */}\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\n                <div>\n                  <input\n                    type=\"email\"\n                    name=\"email\"\n                    value={email}\n                    onChange={(e) => setEmail(e.target.value)}\n                    className=\"w-full bg-surface-base border border-white/10 rounded px-4 py-3 text-text-primary text-sm focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all font-interstate\"\n                    placeholder=\"Email Address\"\n                    required\n                  />\n                </div>\n                <div>\n                  <input\n                    type=\"password\"\n                    name=\"password\"\n                    value={password}\n                    onChange={(e) => setPassword(e.target.value)}\n                    className=\"w-full bg-surface-base border border-white/10 rounded px-4 py-3 text-text-primary text-sm focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all font-interstate\"\n                    placeholder=\"Password\"\n                    required\n                  />\n                </div>\n\n                {error && (\n                  <div className=\"flex items-center gap-2 text-alert-gap text-xs font-interstate bg-alert-gap/5 p-3 rounded border border-alert-gap/20\">\n                    <AlertTriangle className=\"w-4 h-4 shrink-0\" />\n                    {error}\n                  </div>\n                )}\n\n                <button\n                  type=\"submit\"\n                  disabled={loading}\n                  className=\"w-full py-4 mt-2 bg-accent hover:bg-accent-hover disabled:bg-accent/40 disabled:cursor-not-allowed text-white font-interstate font-bold text-sm tracking-widest uppercase rounded transition-all relative overflow-hidden group\"\n                >\n                  <span className={`flex items-center justify-center gap-2 transition-transform duration-300 ${loading ? '-translate-y-12' : 'translate-y-0'}`}>\n                    {mode === 'signup' ? 'Create Account' : 'Sign In'}\n                    <ArrowRight className=\"w-4 h-4 group-hover:translate-x-1 transition-transform\" />\n                  </span>\n                  {loading && (\n                    <div className=\"absolute inset-0 flex items-center justify-center animate-fade-in\">\n                      <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\"></div>\n                    </div>\n                  )}\n                </button>\n              </form>\n\n              {/* Footer Switch */}\n              <div className=\"mt-8 text-center\">\n                <p className=\"font-interstate text-xs text-text-secondary\">\n                  {mode === 'signup' ? \"Already have an account?\" : \"Don't have an account?\"}\n                  <button\n                    onClick={() => setMode(mode === 'signup' ? 'signin' : 'signup')}\n                    className=\"ml-2 text-text-primary hover:text-accent font-bold underline underline-offset-4 decoration-white/20 hover:decoration-accent transition-all\"\n                  >\n                    {mode === 'signup' ? 'Sign In' : 'Sign Up'}\n                  </button>\n                </p>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AuthModal;\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\Toast.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\ToastContainer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\UserMenu.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\core\\Button.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\core\\EmptyState.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\core\\Input.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\components\\ui\\core\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\access\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\career\\CareerContextProvider.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":82,"column":47,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":82,"endColumn":50,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3083,3086],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3083,3086],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'addToast' and 'resumes.length'. Either include them or remove the dependency array.","line":127,"column":8,"nodeType":"ArrayExpression","endLine":127,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [addToast, resumes.length]","fix":{"range":[5041,5043],"text":"[addToast, resumes.length]"}}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":143,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":143,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5672,5675],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5672,5675],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":162,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":162,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6400,6403],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6400,6403],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":172,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":172,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6815,6818],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6815,6818],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":183,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":183,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7249,7252],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7249,7252],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\n/**\r\n * CareerContextProvider - Global Context Provider for Career State\r\n * \r\n * Persists state via Supabase (public.profiles, public.resumes).\r\n * Replaces legacy localStorage logic.\r\n */\r\n\r\nimport React, { createContext, useState, useCallback, useEffect } from 'react';\r\nimport type { SavedResume, UserProfile } from '@/src/domains/career/types';\r\nimport * as careerService from '@/src/domains/career/services/careerService';\r\nimport { useToastStore } from '@/src/stores/toastStore';\r\n\r\n// Define the context shape\r\nexport interface CareerContextValue {\r\n    // State\r\n    resumes: SavedResume[];\r\n    activeResumeId: string | null;\r\n    userProfile: UserProfile;\r\n    currentResume: SavedResume | undefined;\r\n    isLoading: boolean;\r\n\r\n    // Actions\r\n    uploadResume: (file: File) => Promise<void>;\r\n    selectResume: (id: string) => Promise<void>;\r\n    deleteResume: (id: string) => Promise<void>;\r\n    updateProfile: (profile: Partial<UserProfile>) => Promise<void>;\r\n\r\n    // For backward compatibility (deprecate if possible)\r\n    addResume: (resume: SavedResume) => void;\r\n    setResumes: React.Dispatch<React.SetStateAction<SavedResume[]>>;\r\n    setActiveResumeId: React.Dispatch<React.SetStateAction<string | null>>;\r\n    syncFromStorage: () => void; // No-op now\r\n}\r\n\r\nconst DEFAULT_PROFILE: UserProfile = {\r\n    activeResumeId: null,\r\n    portfolioUrl: '',\r\n    linkedinUrl: ''\r\n};\r\n\r\n// Create the context (exported for use by careerHooks.ts)\r\nexport const CareerContext = createContext<CareerContextValue | null>(null);\r\n\r\nconst STORAGE_KEY_RESUMES = 'rtios_career_resumes';\r\nconst STORAGE_KEY_PROFILE = 'rtios_career_profile';\r\n\r\n// Provider component\r\nexport const CareerContextProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [resumes, setResumes] = useState<SavedResume[]>([]);\r\n    const [userProfile, setUserProfile] = useState<UserProfile>(DEFAULT_PROFILE);\r\n    const [activeResumeId, setActiveResumeId] = useState<string | null>(null);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    const { addToast } = useToastStore();\r\n\r\n    // Derived: Current resume\r\n    const currentResume = resumes.find(r => r.id === activeResumeId) || resumes[0];\r\n\r\n    // Persistence: Save to storage\r\n    useEffect(() => {\r\n        if (!isLoading) {\r\n            localStorage.setItem(STORAGE_KEY_RESUMES, JSON.stringify(resumes));\r\n            localStorage.setItem(STORAGE_KEY_PROFILE, JSON.stringify(userProfile));\r\n        }\r\n    }, [resumes, userProfile, isLoading]);\r\n\r\n    // Initial Load\r\n    useEffect(() => {\r\n        let mounted = true;\r\n\r\n        const init = async () => {\r\n            // 1. Load from Storage (Instant)\r\n            try {\r\n                const storedResumes = localStorage.getItem(STORAGE_KEY_RESUMES);\r\n                const storedProfile = localStorage.getItem(STORAGE_KEY_PROFILE);\r\n\r\n                if (storedResumes && mounted) {\r\n                    const parsed = JSON.parse(storedResumes);\r\n                    // Revive dates\r\n                    setResumes(parsed.map((r: any) => ({ ...r, uploadDate: new Date(r.uploadDate) })));\r\n                }\r\n                if (storedProfile && mounted) {\r\n                    const parsed = JSON.parse(storedProfile);\r\n                    setUserProfile(parsed);\r\n                    if (parsed.activeResumeId) setActiveResumeId(parsed.activeResumeId);\r\n                }\r\n            } catch (e) {\r\n                console.warn('Failed to load from storage:', e);\r\n            }\r\n\r\n            // 2. Sync from Supabase (Silent Sync)\r\n            try {\r\n                const [paramProfile, paramResumes] = await Promise.all([\r\n                    careerService.fetchProfile(),\r\n                    careerService.getResumes()\r\n                ]);\r\n\r\n                if (mounted) {\r\n                    if (paramProfile) {\r\n                        setUserProfile(paramProfile);\r\n                        // If profile has an active resume ID and it exists in fetched resumes, use it\r\n                        if (paramProfile.activeResumeId && paramResumes.find(r => r.id === paramProfile.activeResumeId)) {\r\n                            setActiveResumeId(paramProfile.activeResumeId);\r\n                        } else if (paramResumes.length > 0) {\r\n                            setActiveResumeId(paramResumes[0].id);\r\n                        }\r\n                    }\r\n                    setResumes(paramResumes);\r\n                }\r\n            } catch (err) {\r\n                console.error('Failed to load career data:', err);\r\n                // Only show error toast if we don't have any data yet\r\n                if (resumes.length === 0) {\r\n                    addToast({ type: 'error', message: 'Failed to load profile data' });\r\n                }\r\n            } finally {\r\n                if (mounted) setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        if (typeof window !== 'undefined') {\r\n            init();\r\n        }\r\n        return () => { mounted = false; };\r\n    }, []);\r\n\r\n    // Actions\r\n\r\n    const uploadResume = useCallback(async (file: File) => {\r\n        setIsLoading(true);\r\n        try {\r\n            const newResume = await careerService.uploadResume(file);\r\n            setResumes(prev => [newResume, ...prev]);\r\n            setActiveResumeId(newResume.id);\r\n\r\n            // Update profile with new active ID\r\n            await careerService.updateProfile({ activeResumeId: newResume.id });\r\n            setUserProfile(prev => ({ ...prev, activeResumeId: newResume.id }));\r\n\r\n            addToast({ type: 'success', message: 'Resume uploaded successfully' });\r\n        } catch (error: any) {\r\n            console.error('Upload failed:', error);\r\n            addToast({ type: 'error', message: `Upload failed: ${error.message}` });\r\n            throw error;\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    }, [addToast]);\r\n\r\n    const deleteResume = useCallback(async (id: string) => {\r\n        try {\r\n            await careerService.deleteResume(id);\r\n            setResumes(prev => prev.filter(r => r.id !== id));\r\n\r\n            if (activeResumeId === id) {\r\n                setActiveResumeId(null);\r\n                await careerService.updateProfile({ activeResumeId: null });\r\n            }\r\n            addToast({ type: 'success', message: 'Resume deleted' });\r\n        } catch (error: any) {\r\n            addToast({ type: 'error', message: `Delete failed: ${error.message}` });\r\n        }\r\n    }, [activeResumeId, addToast]);\r\n\r\n    const selectResume = useCallback(async (id: string) => {\r\n        setActiveResumeId(id);\r\n        setUserProfile(prev => ({ ...prev, activeResumeId: id }));\r\n        try {\r\n            await careerService.updateProfile({ activeResumeId: id });\r\n        } catch (err: any) {\r\n            console.error('Failed to sync selection:', err);\r\n        }\r\n    }, []);\r\n\r\n    const updateProfile = useCallback(async (updates: Partial<UserProfile>) => {\r\n        // Optimistic update\r\n        setUserProfile(prev => ({ ...prev, ...updates }));\r\n        try {\r\n            await careerService.updateProfile(updates);\r\n            addToast({ type: 'success', message: 'Profile updated' });\r\n        } catch (err: any) {\r\n            console.error('Profile update failed:', err);\r\n            addToast({ type: 'error', message: 'Failed to update profile' });\r\n            // Revert? (Complex, skipping for now)\r\n        }\r\n    }, [addToast]);\r\n\r\n    // Legacy / Compat stubs\r\n    const addResume = useCallback((resume: SavedResume) => {\r\n        console.warn('addResume is deprecated, use uploadResume');\r\n        // This is tricky because we can't upload 'SavedResume' object back to server easily without the File\r\n        // But for local-first optimism we might leave it. \r\n        // For now, no-op or state update only if we want to be risky.\r\n        setResumes(prev => [resume, ...prev]);\r\n    }, []);\r\n\r\n    const syncFromStorage = useCallback(() => {\r\n        // No-op\r\n    }, []);\r\n\r\n    const value: CareerContextValue = {\r\n        resumes,\r\n        activeResumeId,\r\n        userProfile,\r\n        currentResume,\r\n        isLoading,\r\n        addResume,\r\n        uploadResume,\r\n        selectResume,\r\n        deleteResume,\r\n        updateProfile,\r\n        syncFromStorage,\r\n        setResumes,\r\n        setActiveResumeId\r\n    };\r\n\r\n    return <CareerContext.Provider value={value}>{children}</CareerContext.Provider>;\r\n};\r\n\r\n// Note: useCareerContext hook moved to careerHooks.ts to satisfy react-refresh/only-export-components\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\career\\careerHooks.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\career\\hooks\\useCareerContext.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\career\\services\\careerService.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":52,"column":35,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":52,"endColumn":38,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1749,1752],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1749,1752],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'current' is assigned a value but never used.","line":61,"column":15,"nodeType":null,"messageId":"unusedVar","endLine":61,"endColumn":22},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'storageData' is assigned a value but never used.","line":104,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":104,"endColumn":30}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabaseBrowser } from '@/src/services/supabase';\r\nimport type { SavedResume, UserProfile } from '@/src/domains/career/types';\r\nimport { extractResumeText } from '@/src/domains/intelligence/actions';\r\n\r\n/**\r\n * Career Domain Service\r\n * Handles persistence for User Profiles and Resumes via Supabase\r\n */\r\n\r\n// --- Profile Operations ---\r\n\r\nexport const fetchProfile = async (): Promise<UserProfile | null> => {\r\n    const { data: { user } } = await supabaseBrowser.auth.getUser();\r\n    if (!user) return null;\r\n\r\n    const { data, error } = await supabaseBrowser\r\n        .from('profiles')\r\n        .select('full_name, linkedin_url, portfolio_url, settings')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n    if (error) {\r\n        if (error.code === 'PGRST116') {\r\n            console.warn('Profile not found for user:', user.id);\r\n            return {\r\n                email: user.email || '',\r\n                activeResumeId: null,\r\n                fullName: '',\r\n                linkedinUrl: '',\r\n                portfolioUrl: ''\r\n            };\r\n        }\r\n        console.error('Error fetching profile for user:', user.id);\r\n        return null;\r\n    }\r\n\r\n    // Map DB columns to Type\r\n    return {\r\n        email: user.email || '',\r\n        fullName: data.full_name || '',\r\n        linkedinUrl: data.linkedin_url || '',\r\n        portfolioUrl: data.portfolio_url || '',\r\n        activeResumeId: data.settings?.active_resume_id || null,\r\n    };\r\n};\r\n\r\nexport const updateProfile = async (profile: Partial<UserProfile>) => {\r\n    const { data: { user } } = await supabaseBrowser.auth.getUser();\r\n    if (!user) throw new Error('User not authenticated');\r\n\r\n    // 1. Prepare updates for columns\r\n    const updates: Record<string, any> = {};\r\n    if (profile.linkedinUrl !== undefined) updates.linkedin_url = profile.linkedinUrl;\r\n    if (profile.portfolioUrl !== undefined) updates.portfolio_url = profile.portfolioUrl;\r\n\r\n    // 2. Prepare updates for settings (activeResumeId)\r\n    // We need to fetch existing settings first to merge, or use jsonb_set (simpler to merge in JS)\r\n    if (profile.activeResumeId !== undefined) {\r\n        // Optimistic merge assuming settings exists\r\n        // In a real app we might want a stored procedure or careful merge\r\n        const current = await fetchProfile() || {};\r\n        updates.settings = {\r\n            active_resume_id: profile.activeResumeId\r\n        };\r\n    }\r\n\r\n    // UPSERT Trigger handles creation on signup, so this is just UPDATE usually\r\n    const { error } = await supabaseBrowser\r\n        .from('profiles')\r\n        .update(updates)\r\n        .eq('id', user.id);\r\n\r\n    if (error) throw error;\r\n};\r\n\r\n// --- Resume Operations ---\r\n\r\nexport const getResumes = async (): Promise<SavedResume[]> => {\r\n    const { data, error } = await supabaseBrowser\r\n        .from('resumes')\r\n        .select('*')\r\n        .order('upload_date', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error('Error fetching resumes:', JSON.stringify(error, null, 2));\r\n        return [];\r\n    }\r\n\r\n    return data.map(row => ({\r\n        id: row.id,\r\n        fileName: row.file_name,\r\n        textParams: row.text_content || '',\r\n        uploadDate: new Date(row.upload_date),\r\n        file: undefined // We don't download the binary file list-view\r\n    }));\r\n};\r\n\r\nexport const uploadResume = async (file: File): Promise<SavedResume> => {\r\n    const { data: { user } } = await supabaseBrowser.auth.getUser();\r\n    if (!user) throw new Error('User not authenticated');\r\n\r\n    // 1. Upload to Storage\r\n    const path = `${user.id}/${Date.now()}_${file.name}`;\r\n    const { data: storageData, error: storageError } = await supabaseBrowser.storage\r\n        .from('resumes')\r\n        .upload(path, file);\r\n\r\n    if (storageError) throw storageError;\r\n\r\n    // 2. Extract Text (Server Action)\r\n    // Convert File to Base64\r\n    const arrayBuffer = await file.arrayBuffer();\r\n    const base64 = Buffer.from(arrayBuffer).toString('base64');\r\n    let extractedText = '';\r\n\r\n    try {\r\n        extractedText = await extractResumeText(base64, file.type);\r\n    } catch (err) {\r\n        console.error('Failed to extract text during upload:', err);\r\n        // Proceed with empty text? Or fail? \r\n        // Usually better to fail or mark as 'processing'\r\n        // For now we allow it but log it\r\n    }\r\n\r\n    // 3. Insert into DB\r\n    const { data, error } = await supabaseBrowser\r\n        .from('resumes')\r\n        .insert({\r\n            user_id: user.id,\r\n            file_path: path,\r\n            file_name: file.name,\r\n            text_content: extractedText,\r\n            metadata: {} // TODO: Structured parsing if needed\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n    if (error) throw error;\r\n\r\n    return {\r\n        id: data.id,\r\n        fileName: data.file_name,\r\n        textParams: data.text_content,\r\n        uploadDate: new Date(data.upload_date),\r\n        file: file // Return original file object for local state immediately\r\n    };\r\n};\r\n\r\nexport const deleteResume = async (id: string, filePath?: string) => {\r\n    // Verify file_path if not provided\r\n    let path = filePath;\r\n    if (!path) {\r\n        const { data } = await supabaseBrowser.from('resumes').select('file_path').eq('id', id).single();\r\n        path = data?.file_path;\r\n    }\r\n\r\n    // 1. Delete from DB (Cascade should not handle storage, so manual delete)\r\n    const { error: dbError } = await supabaseBrowser\r\n        .from('resumes')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (dbError) throw dbError;\r\n\r\n    // 2. Delete from Storage\r\n    if (path) {\r\n        await supabaseBrowser.storage.from('resumes').remove([path]);\r\n    }\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\career\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\intelligence\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\intelligence\\services\\orchestrator.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\intelligence\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\jobs\\controllers\\JobSnapshotController.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\jobs\\hooks\\useJobApplications.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\jobs\\services\\jobService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\jobs\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\resumes\\actions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\user\\actions.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabase' is assigned a value but never used.","line":95,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":95,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server';\r\n\r\nimport { getAuthenticatedUser, createSupabaseAdminClient } from '@/src/utils/supabase/server';\r\nimport { UserProfile, UserStats } from './types';\r\n\r\n// Note: Replaced internal helpers with imports from '@/src/utils/supabase/server'\r\n\r\n\r\nexport async function getUserProfile(): Promise<UserProfile> {\r\n    const { user, supabase } = await getAuthenticatedUser();\r\n\r\n    const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('full_name, linkedin_url, portfolio_url')\r\n        .eq('id', user.id)\r\n        .single();\r\n\r\n    return {\r\n        id: user.id,\r\n        email: user.email!,\r\n        fullName: profile?.full_name || null,\r\n        linkedinUrl: profile?.linkedin_url || null,\r\n        portfolioUrl: profile?.portfolio_url || null,\r\n        createdAt: user.created_at,\r\n    };\r\n}\r\n\r\nfunction calculateAccountAge(createdAt: string): string {\r\n    const now = new Date();\r\n    const created = new Date(createdAt);\r\n    const diffTime = Math.abs(now.getTime() - created.getTime());\r\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n\r\n    if (diffDays < 30) {\r\n        return 'Less than a month';\r\n    }\r\n\r\n    const months = Math.floor(diffDays / 30);\r\n    if (months === 1) return '1 month';\r\n    return `${months} months`;\r\n}\r\n\r\nexport async function getUserStats(): Promise<UserStats> {\r\n    const { user, supabase } = await getAuthenticatedUser();\r\n    const userId = user.id;\r\n\r\n    // Count jobs\r\n    const { count: jobCount } = await supabase\r\n        .from('jobs')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('user_id', userId);\r\n\r\n    // Count resumes\r\n    const { count: resumeCount } = await supabase\r\n        .from('resumes')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('user_id', userId);\r\n\r\n    // Count cover letters from job_outputs\r\n    const { count: coverLetterCount } = await supabase\r\n        .from('job_outputs')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('type', 'cover_letter'); // Assuming RLS filters by user automatically or we rely on user_id on the table if it exists? \r\n    // Usually RLS handles user scoping, but explicit eq('user_id', userId) is safer if the table has it.\r\n    // The prompt snippet used .eq('type', 'cover_letter'), implies RLS handles it or user_id is implicit.\r\n    // I'll add .eq('user_id', userId) just in case, or stick to prompt logic if I see table schema.\r\n    // Re-reading prompt: \"RLS policies already configured\". \r\n    // The prompt's example for job_outputs didn't have .eq('user_id'). I'll assume RLS.\r\n    // Wait, prompt actions.ts had:\r\n    // .from('job_outputs').select('*', { ... }).eq('type', 'cover_letter');\r\n    // It didn't have user_id. I will stick to that to start, assuming RLS.\r\n\r\n    const accountAge = calculateAccountAge(user.created_at);\r\n\r\n    return {\r\n        totalJobs: jobCount || 0,\r\n        totalResumes: resumeCount || 0,\r\n        coverLettersGenerated: coverLetterCount || 0,\r\n        accountAge,\r\n    };\r\n}\r\n\r\nexport async function updatePassword(newPassword: string) {\r\n    const { supabase } = await getAuthenticatedUser();\r\n\r\n    const { error } = await supabase.auth.updateUser({\r\n        password: newPassword,\r\n    });\r\n\r\n    if (error) throw new Error(error.message);\r\n    return { success: true };\r\n}\r\n\r\nexport async function deleteUserAccount() {\r\n    const { user, supabase } = await getAuthenticatedUser();\r\n\r\n    // Note: deleting a user typically requires SERVICE_ROLE key or being the user themselves with specific permissions.\r\n    // supabase.auth.admin.deleteUser requires service role.\r\n    // Standard user cannot delete themselves via Admin API.\r\n    // BUT, usually one might use an RPC or just delete from 'users' table if triggers exist?\r\n    // The Prompt used: `await supabase.auth.admin.deleteUser(userId)` passing a SERVICE_ROLE instance.\r\n    // PROMPT REQUIREMENT: \"DO NOT expose SUPABASE_SERVICE_ROLE_KEY to client\".\r\n    // But actions run on server.\r\n    // Using Service Role in Action is okay?\r\n    // \"DO NOT expose ... to client\".\r\n    // The Prompt's suggested actions.ts used `process.env.SUPABASE_SERVICE_ROLE_KEY` inside the action.\r\n    // So I WILL use it, but only for the deletion part which needs admin.\r\n\r\n    // Use centralized admin helper\r\n    const adminSupabase = await createSupabaseAdminClient();\r\n\r\n    const { error } = await adminSupabase.auth.admin.deleteUser(user.id);\r\n\r\n    if (error) throw new Error(error.message);\r\n    return { success: true };\r\n}\r\n\r\nexport async function exportUserData() {\r\n    const { user, supabase } = await getAuthenticatedUser();\r\n    const userId = user.id;\r\n\r\n    const profile = await getUserProfile();\r\n\r\n    const { data: jobs } = await supabase\r\n        .from('jobs')\r\n        .select('*')\r\n        .eq('user_id', userId);\r\n\r\n    const { data: resumes } = await supabase\r\n        .from('resumes')\r\n        .select('*')\r\n        .eq('user_id', userId);\r\n\r\n    // Also getting job_outputs for completeness? Prompt didn't explicitly include it in export but it was in stats.\r\n    // Prompt snippet: \"profile, jobs, resumes\". I'll stick to that.\r\n\r\n    return {\r\n        profile,\r\n        jobs: jobs || [],\r\n        resumes: resumes || [],\r\n        exportedAt: new Date().toISOString(),\r\n    };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\user\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\domains\\workspace\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\CoverLetterFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\InterviewPrepFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\LinkedInFeature.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\Settings\\AccountSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\Settings\\PrivacySection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\features\\Settings\\SettingsView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\hooks\\useJobManagement.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":13,"column":32,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":40},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useCallback has unnecessary dependencies: 'setAnalysis', 'setResearch', 'setResumeText', 'setStatus', 'updateCoverLetter', 'updateInterviewPrep', and 'updateLinkedIn'. Either exclude them or remove the dependency array.","line":202,"column":8,"nodeType":"ArrayExpression","endLine":215,"endColumn":6,"suggestions":[{"desc":"Update the dependencies array to be: [activeJobId, jobs, updateJobOutputs, setActiveJobId, appState]","fix":{"range":[8129,8415],"text":"[activeJobId, jobs, updateJobOutputs, setActiveJobId, appState]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useJobManagement Hook\r\n * \r\n * Consolidates all job management logic from route components:\r\n * - Job CRUD operations (add, delete, select)\r\n * - Workspace synchronization (snapshot/hydrate)\r\n * - Job switching with automatic state preservation\r\n * \r\n * This hook eliminates duplicate logic between AppView and DashboardView\r\n * and provides a single source of truth for job management operations.\r\n */\r\n\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport { useShallow } from 'zustand/react/shallow';\r\nimport { useJobApplications } from '@/src/domains/jobs/hooks/useJobApplications';\r\nimport { useWorkspaceStore } from '@/src/stores/workspaceStore';\r\nimport { createSnapshot, hydrateFromJob } from '@/src/domains/jobs/controllers/JobSnapshotController';\r\nimport { AppStatus } from '@/src/types';\r\nimport type { JobInfo } from '@/src/types';\r\nimport { errorService } from '@/src/services/errorService';\r\nimport { useToastStore } from '@/src/stores/toastStore';\r\nimport { checkJobCreationLimit } from '@/src/utils/jobLimiter';\r\n\r\ninterface UseJobManagementReturn {\r\n    // Data\r\n    jobs: JobInfo[];\r\n    activeJobId: string | null;\r\n    currentJob: JobInfo;\r\n    isLoading: boolean;\r\n\r\n    // Actions\r\n    addJob: (job: JobInfo) => Promise<void>;\r\n    selectJob: (jobId: string) => void;\r\n    deleteJob: (jobId: string) => void;\r\n    deleteJobWithWorkspaceClear: (jobId: string) => void;\r\n    snapshotCurrentJob: () => void;\r\n    addNewJobStrategy: () => void;\r\n\r\n    // Low-level operations\r\n    updateJobOutputs: (jobId: string, outputs: import('@/src/domains/jobs/types').JobOutputsUpdate) => void;\r\n    setActiveJobId: (id: string | null) => void;\r\n    setJobs: (jobs: JobInfo[]) => void;\r\n}\r\n\r\nexport const useJobManagement = (): UseJobManagementReturn => {\r\n    // Get job domain state\r\n    const {\r\n        jobs,\r\n        activeJobId,\r\n        addJob: addJobToApplications,\r\n        deleteJob: handleDeleteJob,\r\n        updateJobOutputs,\r\n        setActiveJobId,\r\n        setJobs,\r\n        isLoading\r\n    } = useJobApplications();\r\n\r\n    // Get workspace state and actions (using useShallow to prevent infinite re-renders)\r\n    const appState = useWorkspaceStore(useShallow((s) => ({\r\n        status: s.status,\r\n        error: s.error,\r\n        resumeText: s.resumeText,\r\n        research: s.research,\r\n        analysis: s.analysis,\r\n        coverLetter: s.coverLetter,\r\n        linkedIn: s.linkedIn,\r\n        interviewPrep: s.interviewPrep\r\n    })));\r\n\r\n    const {\r\n        setStatus,\r\n        setResumeText,\r\n        setResearch,\r\n        setAnalysis,\r\n        updateCoverLetter,\r\n        updateLinkedIn,\r\n        updateInterviewPrep,\r\n        clearWorkspace: clearWorkspaceStore\r\n    } = useWorkspaceStore();\r\n\r\n    // Derived data - memoized to prevent recalculation on every render\r\n    const currentJob = useMemo(\r\n        () => jobs.find(j => j.id === activeJobId) || {\r\n            id: '',\r\n            title: '',\r\n            company: '',\r\n            description: '',\r\n            companyUrl: ''\r\n        },\r\n        [jobs, activeJobId]\r\n    );\r\n\r\n    // Snapshot current workspace to active job\r\n    const snapshotCurrentJob = useCallback(() => {\r\n        try {\r\n            if (!activeJobId) return;\r\n            const snapshot = createSnapshot(appState);\r\n            updateJobOutputs(activeJobId, snapshot);\r\n        } catch (error) {\r\n            console.error('Failed to snapshot job:', error);\r\n            // Silent fail for auto-save, but log it\r\n        }\r\n    }, [activeJobId, updateJobOutputs, appState]);\r\n\r\n    // Add new job (with lifetime limit check)\r\n    const addJob = useCallback(async (job: JobInfo) => {\r\n        try {\r\n            // Check lifetime limit BEFORE creating job\r\n            const limit = await checkJobCreationLimit();\r\n\r\n            if (!limit.allowed) {\r\n                // Trigger upgrade modal via custom event\r\n                window.dispatchEvent(new CustomEvent('show-upgrade-modal', {\r\n                    detail: {\r\n                        title: 'Free Trial Complete',\r\n                        message: limit.message || 'Free trial limit reached',\r\n                        isLifetimeLimit: true,\r\n                        totalUsed: limit.totalUsed,\r\n                        totalAllowed: limit.totalAllowed\r\n                    }\r\n                }));\r\n\r\n                useToastStore.getState().addToast({\r\n                    type: 'error',\r\n                    message: limit.message || 'Job creation limit reached'\r\n                });\r\n\r\n                throw new Error('Job creation limit reached');\r\n            }\r\n\r\n            // Show warning when approaching limit (1 remaining)\r\n            const remaining = limit.totalAllowed - limit.totalUsed - 1;\r\n            if (remaining === 1 && !limit.isAdmin) {\r\n                useToastStore.getState().addToast({\r\n                    type: 'warning',\r\n                    message: `You have 1 free job application remaining`,\r\n                    duration: 6000\r\n                });\r\n            } else if (remaining === 0 && !limit.isAdmin) {\r\n                useToastStore.getState().addToast({\r\n                    type: 'warning',\r\n                    message: `This is your last free job application!`,\r\n                    duration: 6000\r\n                });\r\n            }\r\n\r\n            if (activeJobId) snapshotCurrentJob();\r\n            await addJobToApplications(job);\r\n            clearWorkspaceStore(appState.linkedIn.input);\r\n            setStatus(AppStatus.IDLE);\r\n            useToastStore.getState().addToast({ type: 'success', message: 'Job added successfully' });\r\n        } catch (error: unknown) {\r\n            const message = errorService.handleError(error, {\r\n                component: 'useJobManagement',\r\n                action: 'addJob',\r\n                jobTitle: job.title\r\n            });\r\n            // Don't show duplicate error if it's a limit error\r\n            if (!(error instanceof Error && error.message === 'Job creation limit reached')) {\r\n                useToastStore.getState().addToast({ type: 'error', message });\r\n            }\r\n        }\r\n    }, [activeJobId, snapshotCurrentJob, addJobToApplications, clearWorkspaceStore, setStatus, appState]);\r\n\r\n    // Select/switch to different job\r\n    const selectJob = useCallback((jobId: string) => {\r\n        // 1. Snapshot current job (bulk save recommended)\r\n        if (activeJobId) {\r\n            const snapshot = createSnapshot(appState);\r\n            updateJobOutputs(activeJobId, snapshot, { bulk: true });\r\n        }\r\n\r\n        // 2. Hydrate from target job\r\n        const targetJob = jobs.find(j => j.id === jobId);\r\n        const hydratedState = hydrateFromJob(targetJob, appState.linkedIn.input);\r\n\r\n        // 3. Batch apply updates to workspace store\r\n        // We do this individually but sequentially; however, because they are inside a useCallback\r\n        // that's triggered by a UI event, React 18 will batch these automatically.\r\n        // We also ensure we only update if values actually changed to prevent redundant work.\r\n        useWorkspaceStore.setState((state) => {\r\n            if (hydratedState.status !== undefined) state.status = hydratedState.status;\r\n            if (hydratedState.resumeText !== undefined) state.resumeText = hydratedState.resumeText;\r\n            if (hydratedState.research !== undefined) state.research = hydratedState.research;\r\n            if (hydratedState.analysis !== undefined) state.analysis = hydratedState.analysis;\r\n\r\n            if (hydratedState.coverLetter) {\r\n                state.coverLetter = { ...state.coverLetter, ...hydratedState.coverLetter };\r\n            }\r\n            if (hydratedState.linkedIn) {\r\n                state.linkedIn = { ...state.linkedIn, ...hydratedState.linkedIn };\r\n            }\r\n            if (hydratedState.interviewPrep) {\r\n                state.interviewPrep = { ...state.interviewPrep, ...hydratedState.interviewPrep };\r\n            }\r\n\r\n            if (!hydratedState.status) state.status = AppStatus.IDLE;\r\n        });\r\n\r\n        // 4. Set as active\r\n        setActiveJobId(jobId);\r\n    }, [\r\n        activeJobId,\r\n        jobs,\r\n        updateJobOutputs,\r\n        setStatus,\r\n        setResumeText,\r\n        setResearch,\r\n        setAnalysis,\r\n        updateCoverLetter,\r\n        updateLinkedIn,\r\n        updateInterviewPrep,\r\n        setActiveJobId,\r\n        appState\r\n    ]);\r\n\r\n    // Delete job (simple)\r\n    const deleteJob = useCallback((jobId: string) => {\r\n        try {\r\n            handleDeleteJob(jobId);\r\n            useToastStore.getState().addToast({ type: 'success', message: 'Job deleted' });\r\n        } catch (error: unknown) {\r\n            const message = errorService.handleError(error, {\r\n                component: 'useJobManagement',\r\n                action: 'deleteJob',\r\n                jobId\r\n            });\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    }, [handleDeleteJob]);\r\n\r\n    // Delete job with workspace clear\r\n    const deleteJobWithWorkspaceClear = useCallback((jobId: string) => {\r\n        try {\r\n            const wasActive = activeJobId === jobId;\r\n            handleDeleteJob(jobId);\r\n            if (wasActive) {\r\n                clearWorkspaceStore(appState.linkedIn.input);\r\n            }\r\n            useToastStore.getState().addToast({ type: 'success', message: 'Job deleted' });\r\n        } catch (error: unknown) {\r\n            const message = errorService.handleError(error, {\r\n                component: 'useJobManagement',\r\n                action: 'deleteJobWithWorkspaceClear',\r\n                jobId\r\n            });\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    }, [activeJobId, handleDeleteJob, clearWorkspaceStore, appState]);\r\n\r\n    // Add new job strategy (clears workspace)\r\n    const addNewJobStrategy = useCallback(() => {\r\n        if (activeJobId) snapshotCurrentJob();\r\n        setActiveJobId(null);\r\n        clearWorkspaceStore(appState.linkedIn.input);\r\n        setStatus(AppStatus.IDLE);\r\n    }, [activeJobId, snapshotCurrentJob, setActiveJobId, clearWorkspaceStore, setStatus, appState]);\r\n\r\n    return {\r\n        // Data\r\n        jobs,\r\n        activeJobId,\r\n        currentJob,\r\n        isLoading,\r\n\r\n        // Actions\r\n        addJob,\r\n        selectJob,\r\n        deleteJob,\r\n        deleteJobWithWorkspaceClear,\r\n        snapshotCurrentJob,\r\n        addNewJobStrategy,\r\n\r\n        // Low-level\r\n        updateJobOutputs,\r\n        setActiveJobId,\r\n        setJobs\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\hooks\\useResumeManagement.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'storage' is defined but never used.","line":23,"column":10,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'supabaseBrowser' is defined but never used.","line":23,"column":19,"nodeType":null,"messageId":"unusedVar","endLine":23,"endColumn":34},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'legacyAddResume' is assigned a value but never used.","line":49,"column":20,"nodeType":null,"messageId":"unusedVar","endLine":49,"endColumn":35},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setResumeText' is assigned a value but never used.","line":63,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":63,"endColumn":37}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * useResumeManagement Hook\r\n * \r\n * Consolidates all resume management logic from route components:\r\n * - Resume CRUD operations (add, delete, select)\r\n * - Profile updates (portfolio URL, LinkedIn URL)\r\n * - Workspace synchronization (resumeText)\r\n * \r\n * This hook eliminates duplicate logic between AppView and DashboardView\r\n * and provides a single source of truth for resume management operations.\r\n */\r\n\r\nimport { useCallback } from 'react';\r\nimport { useShallow } from 'zustand/react/shallow';\r\nimport { useCareerContext } from '@/src/domains/career/hooks/useCareerContext';\r\nimport { useWorkspaceStore } from '@/src/stores/workspaceStore';\r\n\r\n// import { fileToBase64 } from '@/src/utils/fileUtils';\r\nimport { AppStatus } from '@/src/types';\r\nimport type { SavedResume, UserProfile } from '@/src/domains/career/types';\r\nimport { errorService } from '@/src/services/errorService';\r\nimport { useToastStore } from '@/src/stores/toastStore';\r\nimport { storage, supabaseBrowser } from '@/src/services/supabase';\r\n\r\ninterface UseResumeManagementReturn {\r\n    // Data\r\n    resumes: SavedResume[];\r\n    activeResumeId: string | null;\r\n    currentResume: SavedResume | undefined;\r\n    userProfile: UserProfile;\r\n    isLoading: boolean;\r\n\r\n    // Actions\r\n    addResume: (file: File) => Promise<void>;\r\n    selectResume: (id: string) => void;\r\n    deleteResume: (id: string) => void;\r\n    updateProfile: (profile: UserProfile) => void;\r\n    syncFromStorage: () => void; // NEW: Reload from localStorage\r\n}\r\n\r\nexport const useResumeManagement = (): UseResumeManagementReturn => {\r\n    // Get career domain state\r\n    const {\r\n        resumes,\r\n        activeResumeId,\r\n        userProfile,\r\n        currentResume,\r\n        isLoading,\r\n        addResume: legacyAddResume, // Deprecated\r\n        uploadResume: contextUploadResume,\r\n        selectResume: handleSelectResume,\r\n        deleteResume: handleDeleteResume,\r\n        updateProfile: setUserProfile,\r\n        syncFromStorage, // NEW: Sync function from context\r\n    } = useCareerContext();\r\n\r\n    // Get workspace state (use useShallow to prevent infinite re-renders)\r\n    useWorkspaceStore(useShallow((s) => ({\r\n        status: s.status\r\n    })));\r\n\r\n    // Get workspace actions\r\n    const { setStatus, setResumeText } = useWorkspaceStore();\r\n\r\n    /**\r\n     * Add a new resume with parsing\r\n     * Handles: file ΓåÆ base64 ΓåÆ AI text extraction ΓåÆ context update\r\n     */\r\n    const addResume = useCallback(async (file: File) => {\r\n        setStatus(AppStatus.PARSING_RESUME);\r\n        try {\r\n            await contextUploadResume(file);\r\n            setStatus(AppStatus.IDLE);\r\n        } catch (e: unknown) {\r\n            const message = errorService.handleError(e, {\r\n                component: 'useResumeManagement',\r\n                action: 'addResume',\r\n                fileName: file.name\r\n            });\r\n            setStatus(AppStatus.ERROR);\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    }, [contextUploadResume, setStatus]);\r\n\r\n    /**\r\n     * Select a resume as active (simple passthrough)\r\n     */\r\n    const selectResume = useCallback((id: string) => {\r\n        try {\r\n            handleSelectResume(id);\r\n        } catch (error: unknown) {\r\n            const message = errorService.handleError(error, {\r\n                component: 'useResumeManagement',\r\n                action: 'selectResume',\r\n                resumeId: id\r\n            });\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    }, [handleSelectResume]);\r\n\r\n    /**\r\n     * Delete a resume (simple passthrough)\r\n     */\r\n    const deleteResume = useCallback((id: string) => {\r\n        try {\r\n            handleDeleteResume(id);\r\n            useToastStore.getState().addToast({ type: 'success', message: 'Resume deleted' });\r\n        } catch (error: unknown) {\r\n            const message = errorService.handleError(error, {\r\n                component: 'useResumeManagement',\r\n                action: 'deleteResume',\r\n                resumeId: id\r\n            });\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    }, [handleDeleteResume]);\r\n\r\n    /**\r\n     * Update user profile (simple passthrough)\r\n     */\r\n    const updateProfile = useCallback((profile: UserProfile) => {\r\n        setUserProfile(profile);\r\n    }, [setUserProfile]);\r\n\r\n    return {\r\n        // Data\r\n        resumes,\r\n        activeResumeId,\r\n        currentResume,\r\n        userProfile,\r\n        isLoading,\r\n\r\n        // Actions\r\n        addResume,\r\n        selectResume,\r\n        deleteResume,\r\n        updateProfile,\r\n        syncFromStorage // NEW: Pass through sync function\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\routes\\AppView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setUserProfile' is assigned a value but never used.","line":82,"column":24,"nodeType":null,"messageId":"unusedVar","endLine":82,"endColumn":38}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\n/**\r\n * AppView.tsx - Main Application View Component\r\n * \r\n * This component contains the main app layout (NavigationSidebar + Features + RightSidebar).\r\n * Extracted from App.tsx to support React Router v6 integration.\r\n */\r\n\r\nimport React, { useEffect, useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useShallow } from 'zustand/react/shallow';\r\nimport { useAppStore } from '@/src/stores/appStore';\r\nimport { useWorkspaceStore } from '@/src/stores/workspaceStore';\r\nimport { NavigationSidebar } from '@/src/components/layout/NavigationSidebar';\r\nimport { RightSidebar } from '@/src/components/layout/RightSidebar';\r\nimport { CoverLetterFeature } from '@/src/features/CoverLetterFeature';\r\nimport { LinkedInFeature } from '@/src/features/LinkedInFeature';\r\nimport { InterviewPrepFeature } from '@/src/features/InterviewPrepFeature';\r\nimport ContextSwitcher from '@/src/components/layout/ContextSwitcher';\r\nimport { useResumeManagement } from '@/src/hooks/useResumeManagement';\r\nimport { useJobManagement } from '@/src/hooks/useJobManagement';\r\nimport { AppStatus, ToneType } from '@/src/types';\r\nimport { Layout, Menu } from 'lucide-react';\r\nimport * as GeminiService from '@/src/domains/intelligence/actions';\r\nimport { ErrorBoundary } from '@/src/components/errors/ErrorBoundary';\r\nimport { FeatureErrorBoundary } from '@/src/components/errors/FeatureErrorBoundary';\r\nimport { ToastContainer } from '@/src/components/ui/ToastContainer';\r\nimport { errorService } from '@/src/services/errorService';\r\nimport { useToastStore } from '@/src/stores/toastStore';\r\nimport UpgradeModal from '@/src/components/modals/UpgradeModal';\r\n\r\nconst AppView: React.FC = () => {\r\n    const router = useRouter();\r\n\r\n    // --- Navigation State from appStore ---\r\n    const activeModule = useAppStore((s) => s.activeModule);\r\n    const setActiveSidebarTab = useAppStore((s) => s.setActiveSidebarTab);\r\n    const setCurrentView = useAppStore((s) => s.setCurrentView);\r\n\r\n    // --- Mobile Sidebar State ---\r\n    const [isMobileSidebarOpen, setIsMobileSidebarOpen] = useState(false);\r\n\r\n    // --- Upgrade Modal State ---\r\n    const [upgradeModalState, setUpgradeModalState] = useState({\r\n        isOpen: false,\r\n        title: '',\r\n        message: '',\r\n        isLifetimeLimit: false,\r\n        totalUsed: 0,\r\n        totalAllowed: 2\r\n    });\r\n\r\n    // Listen for upgrade modal trigger\r\n    useEffect(() => {\r\n        const handleShowUpgradeModal = (event: Event) => {\r\n            const customEvent = event as CustomEvent;\r\n            setUpgradeModalState({\r\n                isOpen: true,\r\n                ...customEvent.detail\r\n            });\r\n        };\r\n\r\n        window.addEventListener('show-upgrade-modal', handleShowUpgradeModal);\r\n        return () => window.removeEventListener('show-upgrade-modal', handleShowUpgradeModal);\r\n    }, []);\r\n\r\n    // Sync appStore with current route\r\n    useEffect(() => {\r\n        setCurrentView('app');\r\n    }, [setCurrentView]);\r\n\r\n    // --- Domain Hooks (with built-in persistence) ---\r\n    const {\r\n        resumes,\r\n        activeResumeId,\r\n        currentResume,\r\n        userProfile,\r\n        addResume: handleAddResume,\r\n        selectResume: handleSelectResume,\r\n        deleteResume: handleDeleteResume,\r\n        updateProfile: setUserProfile,\r\n        syncFromStorage // NEW: Sync function\r\n    } = useResumeManagement();\r\n\r\n    // Sync career data from storage when mounting AppView\r\n    useEffect(() => {\r\n        syncFromStorage();\r\n    }, [syncFromStorage]);\r\n\r\n    const {\r\n        jobs,\r\n        activeJobId,\r\n        currentJob,\r\n        addJob: handleAddJob,\r\n        selectJob: handleSelectStrategy,\r\n        deleteJobWithWorkspaceClear: handleDeleteJobWithWorkspaceClear,\r\n        snapshotCurrentJob,\r\n        updateJobOutputs\r\n    } = useJobManagement();\r\n\r\n    // --- Workspace State from workspaceStore ---\r\n    const appState = useWorkspaceStore(useShallow((s) => ({\r\n        status: s.status,\r\n        error: s.error,\r\n        resumeText: s.resumeText,\r\n        research: s.research,\r\n        analysis: s.analysis,\r\n        coverLetter: s.coverLetter,\r\n        linkedIn: s.linkedIn,\r\n        interviewPrep: s.interviewPrep\r\n    })));\r\n\r\n    const {\r\n        setStatus,\r\n        setError,\r\n        setResumeText,\r\n        setResearch,\r\n        setAnalysis,\r\n        updateCoverLetter,\r\n    } = useWorkspaceStore();\r\n\r\n    // --- Library Handlers ---\r\n\r\n\r\n\r\n    const handleError = (message: string) => {\r\n        setStatus(AppStatus.ERROR);\r\n        setError(message);\r\n    };\r\n\r\n    const handleGenerate = async () => {\r\n        if (!currentResume || !currentJob.title) return;\r\n\r\n        setResumeText(currentResume.textParams);\r\n        setStatus(AppStatus.RESEARCHING);\r\n        setError(undefined);\r\n\r\n        try {\r\n            // 1. Parallel: Research & Analysis\r\n            const researchPromise = GeminiService.researchCompany(currentJob.company, currentJob.companyUrl);\r\n            const analysisPromise = GeminiService.analyzeResume(currentResume.textParams, currentJob, { portfolio: userProfile.portfolioUrl, linkedin: userProfile.linkedinUrl });\r\n\r\n            const [researchResult, analysisResult] = await Promise.all([researchPromise, analysisPromise]);\r\n\r\n            setResearch(researchResult);\r\n            setAnalysis(analysisResult);\r\n            setStatus(AppStatus.GENERATING);\r\n\r\n            // 2. Generate Cover Letter (Default Action)\r\n            const coverLetterText = await GeminiService.generateCoverLetter(\r\n                currentResume.textParams,\r\n                currentJob,\r\n                researchResult,\r\n                ToneType.PROFESSIONAL,\r\n                { portfolio: userProfile.portfolioUrl, linkedin: userProfile.linkedinUrl }\r\n            );\r\n\r\n            const newCoverLetterState = {\r\n                content: coverLetterText,\r\n                tone: ToneType.PROFESSIONAL,\r\n                isGenerating: false\r\n            };\r\n\r\n            setStatus(AppStatus.COMPLETED);\r\n            updateCoverLetter(newCoverLetterState);\r\n\r\n            // Update History\r\n            if (activeJobId) {\r\n                updateJobOutputs(activeJobId, {\r\n                    research: researchResult,\r\n                    analysis: analysisResult,\r\n                    coverLetter: newCoverLetterState\r\n                });\r\n            }\r\n\r\n            // Switch Sidebar to Analysis on completion\r\n            setActiveSidebarTab('analysis');\r\n\r\n        } catch (e: unknown) {\r\n            const message = errorService.handleError(e, {\r\n                component: 'AppView',\r\n                action: 'handleGenerate',\r\n                jobId: activeJobId || undefined,\r\n                resumeId: activeResumeId || undefined\r\n            });\r\n            handleError(message);\r\n            useToastStore.getState().addToast({ type: 'error', message });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <ErrorBoundary>\r\n            <div className=\"flex h-screen bg-surface-base text-text-primary overflow-hidden\">\r\n                {/* 1. Left Navigation Sidebar (Vertical) */}\r\n                <NavigationSidebar\r\n                    onLogoClick={() => router.push('/')}\r\n                    onSnapshotBeforeDashboard={snapshotCurrentJob}\r\n                />\r\n\r\n                {/* 2. Main Content Area (Flexible) */}\r\n                <main className=\"flex-1 flex flex-col bg-surface-base relative border-r border-white/5 min-w-0 overflow-hidden pb-20 lg:pb-0\">\r\n                    {/* Global Context Switcher */}\r\n                    <ContextSwitcher\r\n                        jobs={jobs}\r\n                        activeJobId={activeJobId}\r\n                        resumes={resumes}\r\n                        activeResumeId={activeResumeId}\r\n                        onSelectStrategy={handleSelectStrategy}\r\n                    />\r\n\r\n                    {/* Loading Overlay */}\r\n                    {(appState.status === AppStatus.PARSING_RESUME || appState.status === AppStatus.RESEARCHING || appState.status === AppStatus.ANALYZING || appState.status === AppStatus.GENERATING) && (\r\n                        <div className=\"absolute inset-0 bg-surface-base/90 backdrop-blur-sm z-50 flex flex-col items-center justify-center\">\r\n                            <div className=\"flex flex-col items-center gap-6\">\r\n                                <div className=\"relative w-16 h-16\">\r\n                                    <div className=\"absolute inset-0 border-t-2 border-accent rounded-full animate-spin\"></div>\r\n                                    <div className=\"absolute inset-2 border-r-2 border-white/20 rounded-full animate-spin [animation-direction:reverse]\"></div>\r\n                                </div>\r\n                                <div className=\"font-interstate text-xs font-bold text-accent uppercase tracking-[0.2em] animate-pulse\">\r\n                                    {appState.status === AppStatus.PARSING_RESUME && \"Ingesting Asset Data...\"}\r\n                                    {appState.status === AppStatus.RESEARCHING && \"Executing Market Recon...\"}\r\n                                    {appState.status === AppStatus.ANALYZING && \"Running Fit Diagnostics...\"}\r\n                                    {appState.status === AppStatus.GENERATING && \"Synthesizing Intelligence...\"}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Empty State */}\r\n                    {appState.status === AppStatus.IDLE && activeModule !== 'linkedin' && !activeJobId && !activeResumeId && (\r\n                        <div className=\"absolute inset-0 flex flex-col items-center justify-center opacity-30 pointer-events-none mt-20\">\r\n                            <Layout className=\"w-24 h-24 text-text-secondary mb-4\" />\r\n                            <h1 className=\"font-tiempos text-3xl text-text-primary\">Rtios AI</h1>\r\n                            <p className=\"font-interstate text-sm text-text-secondary mt-2\">Executive Intelligence Suite</p>\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Module Render */}\r\n                    <>\r\n                        <div className={`h-full flex flex-col ${activeModule === 'coverLetter' ? 'block' : 'hidden'}`}>\r\n                            <FeatureErrorBoundary featureName=\"Cover Letter\">\r\n                                <CoverLetterFeature\r\n                                    currentResume={currentResume || null}\r\n                                    currentJob={currentJob}\r\n                                    userProfile={userProfile}\r\n                                    activeJobId={activeJobId}\r\n                                    onUpdateJobOutputs={updateJobOutputs}\r\n                                />\r\n                            </FeatureErrorBoundary>\r\n                        </div>\r\n                        <div className={`h-full flex flex-col ${activeModule === 'linkedin' ? 'block' : 'hidden'}`}>\r\n                            <FeatureErrorBoundary featureName=\"LinkedIn\">\r\n                                <LinkedInFeature\r\n                                    currentResume={currentResume || null}\r\n                                    currentJob={currentJob}\r\n                                    activeJobId={activeJobId}\r\n                                    onUpdateJobOutputs={updateJobOutputs}\r\n                                />\r\n                            </FeatureErrorBoundary>\r\n                        </div>\r\n                        <div className={`h-full flex flex-col ${activeModule === 'interview' ? 'block' : 'hidden'}`}>\r\n                            <FeatureErrorBoundary featureName=\"Interview Prep\">\r\n                                <InterviewPrepFeature\r\n                                    currentResume={currentResume || null}\r\n                                    currentJob={currentJob}\r\n                                    userProfile={userProfile}\r\n                                    activeJobId={activeJobId}\r\n                                    onUpdateJobOutputs={updateJobOutputs}\r\n                                />\r\n                            </FeatureErrorBoundary>\r\n                        </div>\r\n                    </>\r\n                </main>\r\n\r\n                {/* 3. Right Sidebar (Context & Intelligence) */}\r\n                <RightSidebar\r\n                    resumes={resumes}\r\n                    activeResumeId={activeResumeId}\r\n                    onAddResume={handleAddResume}\r\n                    onSelectResume={handleSelectResume}\r\n                    onDeleteResume={handleDeleteResume}\r\n                    jobs={jobs}\r\n                    activeJobId={activeJobId}\r\n                    onAddJob={handleAddJob}\r\n                    onSelectJob={handleSelectStrategy}\r\n                    onDeleteJob={handleDeleteJobWithWorkspaceClear}\r\n                    onGenerate={handleGenerate}\r\n                    appStatus={appState.status}\r\n                    isMobileOpen={isMobileSidebarOpen}\r\n                    onMobileClose={() => setIsMobileSidebarOpen(false)}\r\n                />\r\n\r\n                {/* Mobile Floating Action Button to open sidebar */}\r\n                <button\r\n                    onClick={() => setIsMobileSidebarOpen(true)}\r\n                    className=\"lg:hidden fixed bottom-20 right-4 z-30 w-14 h-14 bg-accent rounded-full shadow-lg flex items-center justify-center hover:bg-accent-hover transition-colors\"\r\n                    aria-label=\"Open workspace\"\r\n                >\r\n                    <Menu className=\"w-6 h-6 text-surface-base\" />\r\n                </button>\r\n\r\n                <ToastContainer />\r\n\r\n                {/* Upgrade Modal */}\r\n                <UpgradeModal\r\n                    isOpen={upgradeModalState.isOpen}\r\n                    onClose={() => setUpgradeModalState(prev => ({ ...prev, isOpen: false }))}\r\n                    title={upgradeModalState.title}\r\n                    message={upgradeModalState.message}\r\n                    isLifetimeLimit={upgradeModalState.isLifetimeLimit}\r\n                    totalUsed={upgradeModalState.totalUsed}\r\n                    totalAllowed={upgradeModalState.totalAllowed}\r\n                />\r\n            </div>\r\n        </ErrorBoundary>\r\n    );\r\n};\r\n\r\nexport default AppView;\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\routes\\DashboardView.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\services\\errorService.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\services\\supabase.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\stores\\appStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\stores\\jobStore.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'activeJobId' is assigned a value but never used.","line":90,"column":25,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":36},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'jobs' is assigned a value but never used.","line":90,"column":38,"nodeType":null,"messageId":"unusedVar","endLine":90,"endColumn":42}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Job Store - Zustand Store for Job Application Library\r\n * \r\n * Centralizes job data to prevent redundant fetching across routes.\r\n * Caches job list and manages active job selection globally.\r\n */\r\n\r\nimport { create } from 'zustand';\r\nimport { immer } from 'zustand/middleware/immer';\r\nimport { persist } from 'zustand/middleware';\r\nimport type { JobInfo, JobOutputs } from '@/src/domains/jobs/types';\r\nimport * as jobService from '@/src/domains/jobs/services/jobService';\r\n\r\ninterface JobStoreState {\r\n    jobs: JobInfo[];\r\n    activeJobId: string | null;\r\n    isLoading: boolean;\r\n    hasLoaded: boolean;\r\n}\r\n\r\ninterface JobStoreActions {\r\n    fetchJobs: (force?: boolean) => Promise<void>;\r\n    addJob: (job: JobInfo) => Promise<string>;\r\n    deleteJob: (id: string) => Promise<void>;\r\n    updateJobOutputs: (jobId: string, outputs: JobOutputs, options?: { bulk?: boolean }) => Promise<void>;\r\n    setActiveJobId: (id: string | null) => void;\r\n    // Fallback for direct state manipulation during migration if needed\r\n    setJobs: (jobs: JobInfo[]) => void;\r\n}\r\n\r\ntype JobStore = JobStoreState & JobStoreActions;\r\n\r\nexport const useJobStore = create<JobStore>()(\r\n    persist(\r\n        immer((set, get) => ({\r\n            // Initial state\r\n            jobs: [],\r\n            activeJobId: null,\r\n            isLoading: false,\r\n            hasLoaded: false,\r\n\r\n            // Actions\r\n            fetchJobs: async (force = false) => {\r\n                // Return early if already loaded and not forcing a refresh\r\n                if (get().hasLoaded && !force) return;\r\n\r\n                set((state) => { state.isLoading = true; });\r\n                try {\r\n                    const fetched = await jobService.fetchJobs();\r\n                    set((state) => {\r\n                        state.jobs = fetched;\r\n                        state.hasLoaded = true;\r\n                        state.isLoading = false;\r\n                    });\r\n                } catch (error) {\r\n                    console.error('[JobStore] Fetch failed:', error);\r\n                    set((state) => { state.isLoading = false; });\r\n                }\r\n            },\r\n\r\n            addJob: async (job: JobInfo) => {\r\n                // Optimistic update\r\n                const newJobId = job.id || crypto.randomUUID();\r\n                const newJob = { ...job, id: newJobId, dateAdded: new Date(), outputs: job.outputs || {} };\r\n\r\n                set((state) => {\r\n                    state.jobs = [newJob, ...state.jobs];\r\n                    state.activeJobId = newJobId;\r\n                });\r\n\r\n                // Persistence - MUST complete before returning\r\n                try {\r\n                    await jobService.saveJob(newJob);\r\n                } catch (error) {\r\n                    console.error('[JobStore] Add job failed:', {\r\n                        error,\r\n                        message: error instanceof Error ? error.message : 'Unknown error'\r\n                    });\r\n                    // Rollback optimistic update on failure\r\n                    set((state) => {\r\n                        state.jobs = state.jobs.filter(j => j.id !== newJobId);\r\n                        if (state.activeJobId === newJobId) state.activeJobId = null;\r\n                    });\r\n                    throw error; // Re-throw to notify caller\r\n                }\r\n                return newJobId;\r\n            },\r\n\r\n            deleteJob: async (id: string) => {\r\n                const { activeJobId, jobs } = get();\r\n\r\n                // Optimistic delete\r\n                set((state) => {\r\n                    state.jobs = state.jobs.filter(j => j.id !== id);\r\n                    if (state.activeJobId === id) state.activeJobId = null;\r\n                });\r\n\r\n                // Persistence\r\n                try {\r\n                    await jobService.deleteJob(id);\r\n                } catch (error) {\r\n                    console.error('[JobStore] Delete job failed:', error);\r\n                    // Handle error/rollback\r\n                }\r\n            },\r\n\r\n            updateJobOutputs: async (jobId: string, outputs: JobOutputs, options: { bulk?: boolean } = {}) => {\r\n                // Optimistic update\r\n                set((state) => {\r\n                    const job = state.jobs.find(j => j.id === jobId);\r\n                    if (job) {\r\n                        job.outputs = { ...job.outputs, ...outputs };\r\n                    }\r\n                });\r\n\r\n                // Persistence\r\n                try {\r\n                    if (options.bulk) {\r\n                        await jobService.saveJobOutputsBulk(jobId, outputs);\r\n                    } else {\r\n                        // Fallback to individual updates if needed\r\n                        if (outputs.research) await jobService.saveJobResearch(jobId, outputs.research);\r\n                        if (outputs.analysis) await jobService.saveJobAnalysis(jobId, outputs.analysis);\r\n                        if (outputs.coverLetter) await jobService.saveCoverLetter(jobId, outputs.coverLetter);\r\n                        if (outputs.linkedIn) await jobService.saveLinkedIn(jobId, outputs.linkedIn);\r\n                        if (outputs.interviewPrep) await jobService.saveInterviewPrep(jobId, outputs.interviewPrep);\r\n                    }\r\n                } catch (error) {\r\n                    console.error('[JobStore] Update outputs failed:', {\r\n                        error,\r\n                        stringified: JSON.stringify(error, null, 2),\r\n                        message: error instanceof Error ? error.message : 'Unknown error'\r\n                    });\r\n                }\r\n            },\r\n\r\n            setActiveJobId: (id) => set((state) => {\r\n                state.activeJobId = id;\r\n            }),\r\n\r\n            setJobs: (jobs) => set((state) => {\r\n                state.jobs = jobs;\r\n                state.hasLoaded = true;\r\n            }),\r\n        })),\r\n        {\r\n            name: 'rtios_job_storage',\r\n        }\r\n    )\r\n);\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\stores\\toastStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\stores\\workspaceStore.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\types\\gemini.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\aiCache.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\fileUtils.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\fileUtils.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\jobLimiter.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\rateLimit.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'RateLimitConfig' is defined but never used.","line":6,"column":11,"nodeType":null,"messageId":"unusedVar","endLine":6,"endColumn":26}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"/**\r\n * Rate Limiting Utility for Gemini API Calls\r\n * Prevents quota abuse by limiting requests per user per time window\r\n */\r\n\r\ninterface RateLimitConfig {\r\n    maxRequests: number;\r\n    windowMs: number;\r\n}\r\n\r\ninterface RateLimitEntry {\r\n    count: number;\r\n    resetTime: number;\r\n}\r\n\r\n// In-memory store (upgrade to Redis for production/multi-instance)\r\nconst rateLimitStore = new Map<string, RateLimitEntry>();\r\n\r\n/**\r\n * Rate limit configs by operation type\r\n */\r\nexport const RATE_LIMITS = {\r\n    // Expensive operations (with Google Search)\r\n    companyResearch: { maxRequests: 10, windowMs: 60 * 60 * 1000 }, // 10 per hour\r\n    jobExtraction: { maxRequests: 5, windowMs: 60 * 60 * 1000 },    // 5 per hour\r\n\r\n    // Medium operations\r\n    coverLetter: { maxRequests: 20, windowMs: 60 * 60 * 1000 },     // 20 per hour\r\n    linkedInMessage: { maxRequests: 20, windowMs: 60 * 60 * 1000 }, // 20 per hour\r\n    interviewPrep: { maxRequests: 15, windowMs: 60 * 60 * 1000 },   // 15 per hour\r\n\r\n    // Light operations\r\n    resumeExtraction: { maxRequests: 10, windowMs: 60 * 60 * 1000 }, // 10 per hour\r\n    resumeAnalysis: { maxRequests: 30, windowMs: 60 * 60 * 1000 },   // 30 per hour\r\n} as const;\r\n\r\n/**\r\n * Check if user is within rate limit for operation\r\n * @throws Error if rate limit exceeded\r\n */\r\nexport async function checkRateLimit(\r\n    userId: string,\r\n    operation: keyof typeof RATE_LIMITS\r\n): Promise<void> {\r\n    const config = RATE_LIMITS[operation];\r\n    const key = `${userId}:${operation}`;\r\n    const now = Date.now();\r\n\r\n    const entry = rateLimitStore.get(key);\r\n\r\n    // First request or window expired\r\n    if (!entry || now > entry.resetTime) {\r\n        rateLimitStore.set(key, {\r\n            count: 1,\r\n            resetTime: now + config.windowMs,\r\n        });\r\n        return;\r\n    }\r\n\r\n    // Within window - check count\r\n    if (entry.count >= config.maxRequests) {\r\n        const resetInMinutes = Math.ceil((entry.resetTime - now) / 60000);\r\n        throw new Error(\r\n            `Rate limit exceeded for ${operation}. ` +\r\n            `Maximum ${config.maxRequests} requests per hour. ` +\r\n            `Try again in ${resetInMinutes} minute${resetInMinutes !== 1 ? 's' : ''}.`\r\n        );\r\n    }\r\n\r\n    // Increment count\r\n    entry.count += 1;\r\n    rateLimitStore.set(key, entry);\r\n}\r\n\r\n/**\r\n * Get current rate limit status for user\r\n */\r\nexport function getRateLimitStatus(userId: string, operation: keyof typeof RATE_LIMITS) {\r\n    const config = RATE_LIMITS[operation];\r\n    const key = `${userId}:${operation}`;\r\n    const now = Date.now();\r\n    const entry = rateLimitStore.get(key);\r\n\r\n    if (!entry || now > entry.resetTime) {\r\n        return {\r\n            remaining: config.maxRequests,\r\n            resetAt: new Date(now + config.windowMs),\r\n            limit: config.maxRequests,\r\n        };\r\n    }\r\n\r\n    return {\r\n        remaining: Math.max(0, config.maxRequests - entry.count),\r\n        resetAt: new Date(entry.resetTime),\r\n        limit: config.maxRequests,\r\n    };\r\n}\r\n\r\n/**\r\n * Clear rate limits for a user (admin function)\r\n */\r\nexport function clearRateLimit(userId: string, operation?: keyof typeof RATE_LIMITS) {\r\n    if (operation) {\r\n        rateLimitStore.delete(`${userId}:${operation}`);\r\n    } else {\r\n        // Clear all operations for user\r\n        for (const key of rateLimitStore.keys()) {\r\n            if (key.startsWith(`${userId}:`)) {\r\n                rateLimitStore.delete(key);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n// Cleanup expired entries every 10 minutes\r\nif (typeof setInterval !== 'undefined') {\r\n    setInterval(() => {\r\n        const now = Date.now();\r\n        for (const [key, entry] of rateLimitStore.entries()) {\r\n            if (now > entry.resetTime) {\r\n                rateLimitStore.delete(key);\r\n            }\r\n        }\r\n    }, 10 * 60 * 1000);\r\n}\r\n\r\n// ============================================================================\r\n// Simple Rate Limiter Factory (for API Routes)\r\n// ============================================================================\r\n\r\n/**\r\n * In-memory tracker for simple rate limiting\r\n */\r\nconst simpleTrackers = new Map<string, { count: number; expiresAt: number }>();\r\n\r\ninterface SimpleRateLimitConfig {\r\n    interval: number; // Window size in milliseconds\r\n}\r\n\r\n/**\r\n * Simple rate limiter factory for API routes\r\n * Returns a limiter with a check() method\r\n * \r\n * @param checkLimit - Maximum requests allowed in the window (default: 10)\r\n * @param config - Configuration with interval in ms (default: 1 minute)\r\n */\r\nexport const rateLimit = (\r\n    checkLimit = 10,\r\n    config: SimpleRateLimitConfig = { interval: 60 * 1000 }\r\n) => {\r\n    return {\r\n        check: (token: string) => {\r\n            const now = Date.now();\r\n            const record = simpleTrackers.get(token);\r\n\r\n            // Cleanup expired\r\n            if (record && now > record.expiresAt) {\r\n                simpleTrackers.delete(token);\r\n            }\r\n\r\n            const currentRecord = simpleTrackers.get(token) || { count: 0, expiresAt: now + config.interval };\r\n\r\n            // Increment\r\n            currentRecord.count += 1;\r\n\r\n            // Save\r\n            simpleTrackers.set(token, currentRecord);\r\n\r\n            // Check\r\n            const isRateLimited = currentRecord.count > checkLimit;\r\n\r\n            return {\r\n                isRateLimited,\r\n                currentUsage: currentRecord.count,\r\n                limit: checkLimit,\r\n                remaining: Math.max(0, checkLimit - currentRecord.count)\r\n            };\r\n        },\r\n    };\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\supabase\\server.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\validation.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\utils\\validation.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\views\\LandingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\views\\LegalPages.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\src\\views\\PricingPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\vitest.config.mts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"E:\\rtios-next\\my-app\\vitest.setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
